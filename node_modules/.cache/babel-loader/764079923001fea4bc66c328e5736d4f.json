{"remainingRequest":"D:\\vue_workspace\\filemanage\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\filemanage\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\vue_workspace\\filemanage\\src\\store\\modules\\user.js","mtime":1678927900928},{"path":"D:\\vue_workspace\\filemanage\\babel.config.js","mtime":1666484881107},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbG9naW4gfSBmcm9tICcuLi8uLi9hcGkvbG9naW4nOwppbXBvcnQgeyBzZXRVaWQsIHNldFVOYW1lLCBnZXRVaWQsIGdldFVOYW1lLCByZW1vdmVVaWQsIHJlbW92ZVVOYW1lIH0gZnJvbSAnLi4vLi4vdXRpbHMvYXV0aCc7CmNvbnN0IHVzZXIgPSB7CiAgc3RhdGU6IHsKICAgIHVpZDogZ2V0VWlkKCksCiAgICB1bmFtZTogZ2V0VU5hbWUoKSwKICAgIGxvYWRNZW51czogZmFsc2UsCiAgICBhdmF0YXI6ICcnCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9VSUQ6IChzdGF0ZSwgdWlkKSA9PiB7CiAgICAgIHN0YXRlLnVpZCA9IHVpZDsKICAgIH0sCiAgICBTRVRfVU5BTUU6IChzdGF0ZSwgdW5hbWUpID0+IHsKICAgICAgc3RhdGUudW5hbWUgPSB1bmFtZTsKICAgIH0sCiAgICBTRVRfTE9BRF9NRU5VUzogKHN0YXRlLCBsb2FkTWVudXMpID0+IHsKICAgICAgc3RhdGUubG9hZE1lbnVzID0gbG9hZE1lbnVzOwogICAgfSwKICAgIFNFVF9BVkFUQVI6IChzdGF0ZSwgYXZhdGFyKSA9PiB7CiAgICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIExvZ2luKHsKICAgICAgY29tbWl0CiAgICB9LCB1c2VySW5mbykgewogICAgICBjb25zdCB1c2VybmFtZSA9IHVzZXJJbmZvLnVzZXJuYW1lOwogICAgICBjb25zdCBwYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkOwogICAgICBjb25zdCBjaGVja2NvZGUgPSB1c2VySW5mby5jaGVja2NvZGU7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkLCBjaGVja2NvZGUpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgbGV0IHVpZCA9IHJlcy5pZDsKICAgICAgICAgICAgbGV0IHVuYW1lID0gcmVzLm5hbWU7CiAgICAgICAgICAgIGxldCBhdmF0YXIgPSByZXMuYXZhdGFyID09PSBudWxsIHx8IHJlcy5hdmF0YXIgPT09ICcnID8gcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ltYWdlcy9hdmF0YXIucG5nJykgOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfVVJMICsgcmVzLmF2YXRhcjsKICAgICAgICAgICAgc2V0VWlkKHVpZCk7CiAgICAgICAgICAgIHNldFVOYW1lKHVuYW1lKTsKICAgICAgICAgICAgY29tbWl0KCdTRVRfVUlEJywgdWlkKTsKICAgICAgICAgICAgY29tbWl0KCdTRVRfVU5BTUUnLCB1bmFtZSk7CiAgICAgICAgICAgIGNvbW1pdCgnU0VUX0xPQURfTUVOVVMnLCB0cnVlKTsKICAgICAgICAgICAgY29tbWl0KCdhdmF0YXInLCBhdmF0YXIpOwogICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgTG9nb3V0KHsKICAgICAgY29tbWl0LAogICAgICBzdGF0ZQogICAgfSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIHJlbW92ZVVpZCgpOwogICAgICAgIHJlbW92ZVVOYW1lOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlTG9hZE1lbnVzKHsKICAgICAgY29tbWl0CiAgICB9KSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgY29tbWl0KCdTRVRfTE9BRF9NRU5VUycsIGZhbHNlKTsKICAgICAgfSk7CiAgICB9CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB1c2VyOw=="},{"version":3,"names":["login","setUid","setUName","getUid","getUName","removeUid","removeUName","user","state","uid","uname","loadMenus","avatar","mutations","SET_UID","SET_UNAME","SET_LOAD_MENUS","SET_AVATAR","actions","Login","commit","userInfo","username","password","checkcode","Promise","resolve","reject","then","res","id","name","require","process","env","VUE_APP_BASE_URL","Logout","updateLoadMenus"],"sources":["D:/vue_workspace/filemanage/src/store/modules/user.js"],"sourcesContent":["import { login } from '../../api/login'\r\n\r\nimport { setUid, setUName, getUid, getUName, removeUid, removeUName } from '../../utils/auth'\r\n\r\nconst user  = {\r\n  state: {\r\n    uid: getUid(),\r\n    uname: getUName(),\r\n    loadMenus: false,\r\n    avatar: ''\r\n  },\r\n  mutations: {\r\n    SET_UID: (state, uid) => {\r\n      state.uid = uid\r\n    },\r\n    SET_UNAME: (state, uname) => {\r\n      state.uname = uname\r\n    },\r\n    SET_LOAD_MENUS: (state, loadMenus) => {\r\n      state.loadMenus = loadMenus\r\n    },\r\n    SET_AVATAR: (state, avatar) => {\r\n      state.avatar = avatar\r\n    }\r\n  },\r\n  actions: {\r\n    Login({commit}, userInfo) {\r\n      const username = userInfo.username\r\n      const password = userInfo.password\r\n      const checkcode = userInfo.checkcode\r\n      return new Promise((resolve, reject) => {\r\n        login(username, password, checkcode).then(res => {\r\n          if(res) {\r\n            let uid = res.id\r\n            let uname = res.name\r\n            let avatar = (res.avatar === null || res.avatar === '') \r\n              ? require('../../assets/images/avatar.png') : process.env.VUE_APP_BASE_URL + res.avatar\r\n            setUid(uid)\r\n            setUName(uname)\r\n            commit('SET_UID', uid)\r\n            commit('SET_UNAME', uname)\r\n            commit('SET_LOAD_MENUS', true)\r\n            commit('avatar', avatar)\r\n            resolve()\r\n          } else {\r\n            reject()\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    Logout({ commit, state }) {\r\n      return new Promise((resolve, reject) => {\r\n        removeUid()\r\n        removeUName\r\n        resolve()\r\n      })\r\n    },\r\n\r\n    updateLoadMenus({ commit }) {\r\n      return new Promise((resolve, reject) => {\r\n        commit('SET_LOAD_MENUS', false)\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport default user"],"mappings":"AAAA,SAASA,KAAK,QAAQ,iBAAiB;AAEvC,SAASC,MAAM,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AAE7F,MAAMC,IAAI,GAAI;EACZC,KAAK,EAAE;IACLC,GAAG,EAAEN,MAAM,EAAE;IACbO,KAAK,EAAEN,QAAQ,EAAE;IACjBO,SAAS,EAAE,KAAK;IAChBC,MAAM,EAAE;EACV,CAAC;EACDC,SAAS,EAAE;IACTC,OAAO,EAAE,CAACN,KAAK,EAAEC,GAAG,KAAK;MACvBD,KAAK,CAACC,GAAG,GAAGA,GAAG;IACjB,CAAC;IACDM,SAAS,EAAE,CAACP,KAAK,EAAEE,KAAK,KAAK;MAC3BF,KAAK,CAACE,KAAK,GAAGA,KAAK;IACrB,CAAC;IACDM,cAAc,EAAE,CAACR,KAAK,EAAEG,SAAS,KAAK;MACpCH,KAAK,CAACG,SAAS,GAAGA,SAAS;IAC7B,CAAC;IACDM,UAAU,EAAE,CAACT,KAAK,EAAEI,MAAM,KAAK;MAC7BJ,KAAK,CAACI,MAAM,GAAGA,MAAM;IACvB;EACF,CAAC;EACDM,OAAO,EAAE;IACPC,KAAK,CAAC;MAACC;IAAM,CAAC,EAAEC,QAAQ,EAAE;MACxB,MAAMC,QAAQ,GAAGD,QAAQ,CAACC,QAAQ;MAClC,MAAMC,QAAQ,GAAGF,QAAQ,CAACE,QAAQ;MAClC,MAAMC,SAAS,GAAGH,QAAQ,CAACG,SAAS;MACpC,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtC3B,KAAK,CAACsB,QAAQ,EAAEC,QAAQ,EAAEC,SAAS,CAAC,CAACI,IAAI,CAACC,GAAG,IAAI;UAC/C,IAAGA,GAAG,EAAE;YACN,IAAIpB,GAAG,GAAGoB,GAAG,CAACC,EAAE;YAChB,IAAIpB,KAAK,GAAGmB,GAAG,CAACE,IAAI;YACpB,IAAInB,MAAM,GAAIiB,GAAG,CAACjB,MAAM,KAAK,IAAI,IAAIiB,GAAG,CAACjB,MAAM,KAAK,EAAE,GAClDoB,OAAO,CAAC,gCAAgC,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,gBAAgB,GAAGN,GAAG,CAACjB,MAAM;YACzFX,MAAM,CAACQ,GAAG,CAAC;YACXP,QAAQ,CAACQ,KAAK,CAAC;YACfU,MAAM,CAAC,SAAS,EAAEX,GAAG,CAAC;YACtBW,MAAM,CAAC,WAAW,EAAEV,KAAK,CAAC;YAC1BU,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC;YAC9BA,MAAM,CAAC,QAAQ,EAAER,MAAM,CAAC;YACxBc,OAAO,EAAE;UACX,CAAC,MAAM;YACLC,MAAM,EAAE;UACV;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IAEDS,MAAM,CAAC;MAAEhB,MAAM;MAAEZ;IAAM,CAAC,EAAE;MACxB,OAAO,IAAIiB,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtCtB,SAAS,EAAE;QACXC,WAAW;QACXoB,OAAO,EAAE;MACX,CAAC,CAAC;IACJ,CAAC;IAEDW,eAAe,CAAC;MAAEjB;IAAO,CAAC,EAAE;MAC1B,OAAO,IAAIK,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtCP,MAAM,CAAC,gBAAgB,EAAE,KAAK,CAAC;MACjC,CAAC,CAAC;IACJ;EACF;AACF,CAAC;AAED,eAAeb,IAAI"}]}