{"remainingRequest":"D:\\vue_workspace\\filemanage\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\filemanage\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue_workspace\\filemanage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\filemanage\\src\\components\\TreeSelect\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\filemanage\\src\\components\\TreeSelect\\index.vue","mtime":1672716154206},{"path":"D:\\vue_workspace\\filemanage\\babel.config.js","mtime":1666484881107},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVHJlZVNlbGVjdCcsCiAgcHJvcHM6IHsKICAgIHByb3BzOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB2YWx1ZTogJ2lkJywKICAgICAgICAgIGxhYmVsOiAnbmFtZScsCiAgICAgICAgICBjaGlsZHJlbjogJ2NoaWxkcmVuJwogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBvcHRpb25zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9LAogICAgdmFsdWVNdWx0aXBsZTogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIGNsZWFyYWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgLy/oh6rliqjmlLbotbcKICAgIGFjY29yZGlvbjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIG11bHRpcGxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVzdWx0VmFsdWU6IFtdLAogICAgICB2YWx1ZU5hbWU6IHRoaXMubXVsdGlwbGUgPyBbXSA6ICcnCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlKCkgewogICAgICB0aGlzLnJlc3VsdFZhbHVlID0gdGhpcy5tdWx0aXBsZSA/IHRoaXMudmFsdWVNdWx0aXBsZSA6IHRoaXMudmFsdWU7CiAgICAgIHRoaXMuaW5pdEhhbmRsZSgpOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMucmVzdWx0VmFsdWUgPSB0aGlzLm11bHRpcGxlID8gdGhpcy52YWx1ZU11bHRpcGxlIDogdGhpcy52YWx1ZTsKICAgIHRoaXMuaW5pdEhhbmRsZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdEhhbmRsZSgpIHsKICAgICAgaWYgKHRoaXMucmVzdWx0VmFsdWUpIHsKICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkgewogICAgICAgICAgdGhpcy5yZXN1bHRWYWx1ZS5mb3JFYWNoKGl0ZW0gPT4gdGhpcy52YWx1ZU5hbWUucHVzaChpdGVtLm5hbWUpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy52YWx1ZU5hbWUgPSB0aGlzLnJlc3VsdFZhbHVlLm5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuaW5pdFNjcm9sbCgpOwogICAgfSwKICAgIGluaXRTY3JvbGwoKSB7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICBsZXQgc2Nyb2xsV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lbC1zY3JvbGxiYXIgLmVsLXNlbGVjdC1kcm9wZG93bl9fd3JhcCcpWzBdOwogICAgICAgIGxldCBzY3JvbGxCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWwtc2Nyb2xsYmFyIC5lbC1zY3JvbGxiYXJfX2JhcicpOwogICAgICAgIHNjcm9sbFdyYXAuc3R5bGUuY3NzVGV4dCA9ICdtYXJnaW46IDBweDsgbWF4LWhlaWdodDogbm9uZTsgb3ZlcmZsb3c6IGhpZGRlbjsnOwogICAgICAgIHNjcm9sbEJhci5mb3JFYWNoKGVsZSA9PiBlbGUuc3R5bGUud2lkdGggPSAwKTsKICAgICAgfSk7CiAgICB9LAogICAgLy/liIfmjaLpgInpobkKICAgIGhhbmRsZU5vZGVDbGljayhub2RlKSB7CiAgICAgIGlmIChub2RlLmNoaWxkcmVuID09IG51bGwgfHwgbm9kZS5jaGlsZHJlbiA9PSB1bmRlZmluZWQpIHsKICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkgewogICAgICAgICAgbGV0IG51bSA9IDA7CiAgICAgICAgICB0aGlzLnZhbHVlTmFtZS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICBpdGVtID09IG5vZGVbdGhpcy5wcm9wcy5sYWJlbF0gPyBudW0rKyA6IG51bTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKG51bSA9PSAwKSB7CiAgICAgICAgICAgIHRoaXMudmFsdWVOYW1lLnB1c2gobm9kZVt0aGlzLnByb3BzLmxhYmVsXSk7CiAgICAgICAgICAgIHRoaXMucmVzdWx0VmFsdWUucHVzaChub2RlKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kcmVmcy5zZWxlY3RUcmVlLmJsdXIoKTsKICAgICAgICAgIHRoaXMudmFsdWVOYW1lID0gbm9kZVt0aGlzLnByb3BzLmxhYmVsXTsKICAgICAgICAgIHRoaXMucmVzdWx0VmFsdWUgPSBub2RlOwogICAgICAgIH0KICAgICAgICB0aGlzLiRlbWl0KCdnZXRWYWx1ZScsIHRoaXMucmVzdWx0VmFsdWUpOwogICAgICB9CiAgICB9LAogICAgY2hhbmdlVmFsdWUodmFsKSB7CiAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7CiAgICAgICAgdGhpcy5yZXN1bHRWYWx1ZS5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgICBsZXQgaSA9IHZhbC5pbmRleE9mKGl0ZW0ubmFtZSk7CiAgICAgICAgICBpZiAoaSA9PSAtMSkgewogICAgICAgICAgICB0aGlzLnJlc3VsdFZhbHVlLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kZW1pdCgnZ2V0VmFsdWUnLCB0aGlzLnJlc3VsdFZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRlbWl0KCdnZXRWYWx1ZScsIHZhbCk7CiAgICAgIH0KICAgIH0sCiAgICAvL+a4healmumAieS4rQogICAgY2xlYXJIYW5kbGUoKSB7CiAgICAgIHRoaXMudmFsdWVOYW1lID0gdGhpcy5tdWx0aXBsZSA/IFtdIDogJyc7CiAgICAgIHRoaXMucmVzdWx0VmFsdWUgPSBbXTsKICAgICAgdGhpcy5jbGVhclNlbGVjdGVkKCk7CiAgICAgIHRoaXMuJGVtaXQoJ2dldFZhbHVlJywgdGhpcy5yZXN1bHRWYWx1ZSk7CiAgICB9LAogICAgLy/muIXnqbrpgInkuK3moLflvI8KICAgIGNsZWFyU2VsZWN0ZWQoKSB7CiAgICAgIGxldCBhbGxOb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3RyZWUtb3B0aW9uIC5lbC10cmVlLW5vZGUnKTsKICAgICAgYWxsTm9kZS5mb3JFYWNoKGVsZSA9PiBlbGUuY2xhc3NMaXN0LnJlbW92ZSgnaXMtY3VycmVudCcpKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";AA4BA;EACAA;EACAC;IACAA;MACAC;MACAC;QACA;UACAC;UACAC;UACAC;QACA;MACA;IACA;IACAC;MACAL;MACAC;QACA;MACA;IACA;IACAC;MACAF;MACAC;QACA;MACA;IACA;IACAK;MACAN;MACAC;QACA;MACA;IACA;IACAM;MACAP;MACAC;IACA;IACA;IACAO;MACAR;MACAC;IACA;IACAQ;MACAT;MACAC;IACA;EACA;EACAS;IACA;MACAC;MACAC;IACA;EACA;EACAC;IACAX;MACA;MACA;IACA;EACA;EACAY;IACA;IACA;EACA;EACAC;IACAC;MACA;QACA;UACA;QACA;UACA;QACA;MACA;MACA;IACA;IACAC;MACA;QACA;QACA;QACAC;QACAC;MACA;IACA;IACA;IACAC;MACA;QACA;UACA;UACA;YACAC;UACA;UACA;YACA;YACA;UACA;QACA;UACA;UACA;UACA;QACA;QACA;MACA;IACA;IACAC;MACA;QACA;UACA;UACA;YACA;UACA;QACA;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACAC;IACA;EACA;AACA","names":["name","props","type","default","value","label","children","options","valueMultiple","clearable","accordion","multiple","data","resultValue","valueName","watch","mounted","methods","initHandle","initScroll","scrollWrap","scrollBar","handleNodeClick","item","changeValue","clearHandle","clearSelected","allNode"],"sourceRoot":"src/components/TreeSelect","sources":["index.vue"],"sourcesContent":["<template>\r\n  <el-select \r\n    ref=\"selectTree\" \r\n    style=\"width: 400px\"\r\n    :value=\"value\" \r\n    v-model=\"valueName\"\r\n    :multiple=\"multiple\" \r\n    :clearable=\"clearable\"\r\n    @clear=\"clearHandle\"\r\n    @change=\"changeValue\">\r\n    <el-option :value=\"valueName\" class=\"options\">\r\n      <el-tree \r\n        id=\"tree-option\"\r\n        ref=\"selectTree\"\r\n        :accordion=\"accordion\"\r\n        :data=\"options\"\r\n        :props=\"props\"\r\n        :node-key=\"props.value\"\r\n        @node-click=\"handleNodeClick\">\r\n        <span slot-scope=\"{ data }\">\r\n          <span>{{ data.name }}{{ data.children ? '(' + data.children.length + ')' : '' }}</span>\r\n        </span>\r\n      </el-tree>\r\n    </el-option>\r\n  </el-select>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TreeSelect',\r\n  props: {\r\n    props: {\r\n      type: Object,\r\n      default: () => {\r\n        return {\r\n          value: 'id',\r\n          label: 'name',\r\n          children: 'children'\r\n        }\r\n      }\r\n    },\r\n    options: {\r\n      type: Array,\r\n      default: () => {\r\n        return []\r\n      }\r\n    },\r\n    value: {\r\n      type: Object,\r\n      default: () => {\r\n        return {}\r\n      }\r\n    },\r\n    valueMultiple: {\r\n      type: Array,\r\n      default: () => {\r\n        return []\r\n      }\r\n    },\r\n    clearable: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    //自动收起\r\n    accordion: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    multiple: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      resultValue: [],\r\n      valueName: this.multiple ? [] : ''\r\n    }\r\n  },\r\n  watch: {\r\n    value() {\r\n      this.resultValue = this.multiple ? this.valueMultiple : this.value\r\n      this.initHandle()\r\n    }\r\n  },\r\n  mounted() {\r\n    this.resultValue = this.multiple ? this.valueMultiple : this.value\r\n    this.initHandle()\r\n  },\r\n  methods: {\r\n    initHandle() {\r\n      if(this.resultValue) {\r\n        if(this.multiple) {\r\n          this.resultValue.forEach(item => this.valueName.push(item.name))\r\n        } else {\r\n          this.valueName = this.resultValue.name\r\n        }\r\n      }\r\n      this.initScroll()\r\n    },\r\n    initScroll() {\r\n      this.$nextTick(() => {\r\n        let scrollWrap = document.querySelectorAll('.el-scrollbar .el-select-dropdown__wrap')[0]\r\n        let scrollBar = document.querySelectorAll('.el-scrollbar .el-scrollbar__bar')\r\n        scrollWrap.style.cssText = 'margin: 0px; max-height: none; overflow: hidden;'\r\n        scrollBar.forEach(ele => ele.style.width = 0)\r\n      })\r\n    },\r\n    //切换选项\r\n    handleNodeClick(node) {\r\n      if(node.children == null || node.children == undefined) {\r\n        if(this.multiple) {\r\n          let num = 0\r\n          this.valueName.forEach(item => {\r\n            item == node[this.props.label] ? num++ : num\r\n          })\r\n          if(num == 0) {\r\n            this.valueName.push(node[this.props.label])\r\n            this.resultValue.push(node)\r\n          }\r\n        } else {\r\n          this.$refs.selectTree.blur();\r\n          this.valueName = node[this.props.label]\r\n          this.resultValue = node\r\n        }\r\n        this.$emit('getValue', this.resultValue)\r\n      }\r\n    },\r\n    changeValue(val) {\r\n      if(this.multiple) {\r\n        this.resultValue.map((item, index) => {\r\n          let i = val.indexOf(item.name)\r\n          if(i == -1) {\r\n            this.resultValue.splice(index, 1)\r\n          }\r\n        })\r\n        this.$emit('getValue', this.resultValue)\r\n      } else {\r\n        this.$emit('getValue', val)\r\n      }\r\n    },\r\n    //清楚选中\r\n    clearHandle() {\r\n      this.valueName = this.multiple ? [] : ''\r\n      this.resultValue = []\r\n      this.clearSelected()\r\n      this.$emit('getValue', this.resultValue)\r\n    },\r\n    //清空选中样式\r\n    clearSelected() {\r\n      let allNode = document.querySelectorAll('#tree-option .el-tree-node')\r\n      allNode.forEach(ele => ele.classList.remove('is-current'))\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-scrollbar .el-scrollbar__view .el-select-dropdown__item {\r\n  height: auto;\r\n  max-height: 300px;\r\n  padding: 0;\r\n  overflow: hidden;\r\n  overflow-y: auto;\r\n}\r\n.el-select-dropdown__item.selected {\r\n  font-weight: normal;\r\n}\r\nul li >>>.el-tree .el-tree-node__content {\r\n  height: auto;\r\n  padding: 0 20px;\r\n}\r\n.el-tree-node__label {\r\n  font-weight: normal;\r\n}\r\n.el-tree >>> .is-current .el-tree-node__label {\r\n  color: #409EFF;\r\n  font-weight: 700;\r\n}\r\n.el-tree >>> .is-current .el-tree-node__childrent .el-tree-node__label {\r\n  color: #606266;\r\n  font-weight: normal;\r\n}\r\n.el-popper {\r\n  z-index: 9999;\r\n}\r\n.ification_col {\r\n  width: 20px;\r\n  height: 10px;\r\n  display: inline-block;\r\n}\r\n</style>"]}]}