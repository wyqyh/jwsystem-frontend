{"remainingRequest":"D:\\vue_workspace\\jwsystem\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue_workspace\\jwsystem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\jwsystem\\src\\views\\basicdata\\class\\addclass.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\jwsystem\\src\\views\\basicdata\\class\\addclass.vue","mtime":1679400959756},{"path":"D:\\vue_workspace\\jwsystem\\babel.config.js","mtime":1666484881107},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFRyZWVTZWxlY3QgZnJvbSAnQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QnOwppbXBvcnQgJ0ByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzJzsKaW1wb3J0IHsgYWRkQ2xhc3MsIHVwZGF0ZUNsYXNzIH0gZnJvbSAnLi4vLi4vLi4vYXBpL2Jhc2ljZGF0YS9jbGFzcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQWRkQ2xhc3MnLAogIGNvbXBvbmVudHM6IHsKICAgIFRyZWVTZWxlY3QKICB9LAogIHByb3BzOiB7CiAgICBjbGFzc25vczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICB0ZXJtczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBkZXB0czogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBtYWpvcnM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgdHJhaW5sZXZlbHM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgdGFza3R5cGVzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiAn5re75Yqg5pyf54+tJywKICAgICAgb3BlbjogZmFsc2UsCiAgICAgIGNsYXNzaW5mbzogewogICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgY2xhc3NubzogdW5kZWZpbmVkLAogICAgICAgIHN0dW51bTogdW5kZWZpbmVkLAogICAgICAgIHRlcm1pZDogdW5kZWZpbmVkLAogICAgICAgIGRlcHRpZDogdW5kZWZpbmVkLAogICAgICAgIG1ham9yaWQ6IHVuZGVmaW5lZCwKICAgICAgICB0cmFpbmxldmVsaWQ6IHVuZGVmaW5lZCwKICAgICAgICB0YXNrdHlwZWlkOiB1bmRlZmluZWQKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBjbGFzc25vOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn5pyf54+t5Y+35LiN6IO95Li656m6JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHN0dW51bTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+Whq+WGmeWtpuWRmOS6uuaVsCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICB0ZXJtaWQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nlvIDor77lrabmnJ8nLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICB0eXBlOiAnbnVtYmVyJwogICAgICAgIH1dLAogICAgICAgIGRlcHRpZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeeuoeeQhuacuuaehCcsCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgIHR5cGU6ICdudW1iZXInCiAgICAgICAgfV0sCiAgICAgICAgbWFqb3JpZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeWfueiureS4k+S4micsCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgIHR5cGU6ICdudW1iZXInCiAgICAgICAgfV0sCiAgICAgICAgdHJhaW5sZXZlbGlkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5Z+56K6t5bGC5qyhJywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgdHlwZTogJ251bWJlcicKICAgICAgICB9XSwKICAgICAgICB0YXNrdHlwZWlkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5Lu75Yqh57G75YirJywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgdHlwZTogJ251bWJlcicKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgY2xvc2VGb3JtKCkgewogICAgICB0aGlzLmNsYXNzaW5mbyA9IHt9OwogICAgICB0aGlzLnJlc2V0Rm9ybSgnYWRkQ2xhc3NGb3JtUmVmJyk7CiAgICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgfSwKICAgIGVkaXRDbGFzcyhyb3cpIHsKICAgICAgdGhpcy50aXRsZSA9ICLnvJbovpHmnJ/nj63kv6Hmga8iOwogICAgICBPYmplY3QuYXNzaWduKHRoaXMuY2xhc3NpbmZvLCByb3cpOwogICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgfSwKICAgIG9wZW5EaWFsb2coKSB7CiAgICAgIHRoaXMub3BlbiA9IHRydWU7CiAgICB9LAogICAgc3VibWl0Rm9ybSgpIHsKICAgICAgdGhpcy4kcmVmcy5hZGRDbGFzc0Zvcm1SZWYudmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy5jbGFzc2luZm8uc3R1bnVtID0gTnVtYmVyKHRoaXMuY2xhc3NpbmZvLnN0dW51bSk7CiAgICAgICAgICB0aGlzLmNsYXNzaW5mby50ZXJtaWQgPSBOdW1iZXIodGhpcy5jbGFzc2luZm8udGVybWlkKTsKICAgICAgICAgIHRoaXMuY2xhc3NpbmZvLmRlcHRpZCA9IE51bWJlcih0aGlzLmNsYXNzaW5mby5kZXB0aWQpOwogICAgICAgICAgdGhpcy5jbGFzc2luZm8ubWFqb3JpZCA9IE51bWJlcih0aGlzLmNsYXNzaW5mby5tYWpvcmlkKTsKICAgICAgICAgIHRoaXMuY2xhc3NpbmZvLnRyYWlubGV2ZWxpZCA9IE51bWJlcih0aGlzLmNsYXNzaW5mby50cmFpbmxldmVsaWQpOwogICAgICAgICAgdGhpcy5jbGFzc2luZm8udGFza3R5cGVpZCA9IE51bWJlcih0aGlzLmNsYXNzaW5mby50YXNrdHlwZWlkKTsKICAgICAgICAgIGlmICh0aGlzLmNsYXNzaW5mby5pZCA+IDApIHsKICAgICAgICAgICAgdXBkYXRlQ2xhc3ModGhpcy5jbGFzc2luZm8pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgIGxldCBtc2cgPSByZXMubWVzc2FnZTsKICAgICAgICAgICAgICBsZXQgY29kZSA9IHJlcy5jb2RlOwogICAgICAgICAgICAgIGlmIChjb2RlID09IDcpIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1vZGFsLm5vdGlmeUVycm9yKG1zZyk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb2RlID09IDkpIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MobXNnKTsKICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VGb3JtKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFkZENsYXNzKHRoaXMuY2xhc3NpbmZvKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgbGV0IG1zZyA9IHJlcy5tZXNzYWdlOwogICAgICAgICAgICAgIGxldCBjb2RlID0gcmVzLmNvZGU7CiAgICAgICAgICAgICAgaWYgKGNvZGUgPT0gNykgewogICAgICAgICAgICAgICAgdGhpcy4kbW9kYWwubm90aWZ5RXJyb3IobXNnKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGUgPT0gOCkgewogICAgICAgICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcyhtc2cpOwogICAgICAgICAgICAgICAgdGhpcy5jbG9zZUZvcm0oKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":"AA8FA;AACA;AACA;AAEA;EACAA;EACAC;IACAC;EACA;EACAC;IACAC;MACAC;MACAC;QACA;MACA;IACA;IACAC;MACAF;MACAC;QACA;MACA;IACA;IACAE;MACAH;MACAC;QACA;MACA;IACA;IACAG;MACAJ;MACAC;QACA;MACA;IACA;IACAI;MACAL;MACAC;QACA;MACA;IACA;IACAK;MACAN;MACAC;QACA;MACA;IACA;EACA;EACAM;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAP,UACA;UAAAQ;UAAAC;UAAAC;QAAA,EACA;QACAT,SACA;UAAAO;UAAAC;UAAAC;QAAA,EACA;QACAR,SACA;UAAAM;UAAAC;UAAAC;UAAAtB;QAAA,EACA;QACAe,SACA;UAAAK;UAAAC;UAAAC;UAAAtB;QAAA,EACA;QACAgB,UACA;UAAAI;UAAAC;UAAAC;UAAAtB;QAAA,EACA;QACAiB,eACA;UAAAG;UAAAC;UAAAC;UAAAtB;QAAA,EACA;QACAkB,aACA;UAAAE;UAAAC;UAAAC;UAAAtB;QAAA;MAEA;IACA;EACA;EACAuB;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;YACAC;cACA;cACA;cACA;gBACA;cACA;gBACA;gBACA;cACA;YACA;UACA;YACAC;cACA;cACA;cACA;gBACA;cACA;gBACA;gBACA;cACA;YACA;UACA;QAEA;MACA;IACA;EACA;AACA","names":["name","components","TreeSelect","props","classnos","type","default","terms","depts","majors","trainlevels","tasktypes","data","title","open","classinfo","id","classno","stunum","termid","deptid","majorid","trainlevelid","tasktypeid","rules","required","message","trigger","methods","closeForm","editClass","Object","openDialog","submitForm","updateClass","addClass"],"sourceRoot":"src/views/basicdata/class","sources":["addclass.vue"],"sourcesContent":["<template>\r\n  <el-dialog\r\n    :title=\"title\"\r\n    :visible.sync=\"open\"\r\n    @close=\"closeForm\"\r\n    width=\"600px\">\r\n      <el-form label-width=\"100px\" :model=\"classinfo\" ref=\"addClassFormRef\" :rules=\"rules\">\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"期班号\" prop=\"classno\">\r\n              <el-input placeholder=\"请输入期班号\" v-model=\"classinfo.classno\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"开课学期\" prop=\"termid\">\r\n              <el-select v-model=\"classinfo.termid\" placeholder=\"请选择\">\r\n                <el-option\r\n                  v-for=\"item in terms\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"学员人数\" prop=\"stunum\">\r\n              <el-input placeholder=\"请输入学员人数\" v-model=\"classinfo.stunum\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"任务类别\" prop=\"tasktypeid\">\r\n              <el-select v-model=\"classinfo.tasktypeid\" placeholder=\"请选择\">\r\n                <el-option\r\n                  v-for=\"item in tasktypes\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"培训层次\" prop=\"trainlevelid\">\r\n              <el-select v-model=\"classinfo.trainlevelid\" placeholder=\"请选择\">\r\n                <el-option\r\n                  v-for=\"item in trainlevels\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"培训专业\" prop=\"majorid\">\r\n              <el-select v-model=\"classinfo.majorid\" placeholder=\"请选择\">\r\n                <el-option\r\n                  v-for=\"item in majors\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"管理机构\" prop=\"deptid\">\r\n              <tree-select \r\n                :options=\"depts\" \r\n                :show-count=\"true\"\r\n                v-model=\"classinfo.deptid\"\r\n                :value=\"classinfo.deptid\"></tree-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"24\" style=\"text-align: right\">\r\n            <el-button type=\"primary\" @click=\"submitForm\">确定</el-button>\r\n            <el-button @click=\"closeForm\">取消</el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\n\r\nimport TreeSelect from '@riophae/vue-treeselect'\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\r\nimport { addClass, updateClass } from '../../../api/basicdata/class'\r\n\r\nexport default {\r\n  name: 'AddClass',\r\n  components: {\r\n    TreeSelect\r\n  },\r\n  props: {\r\n    classnos: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    terms: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    depts: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    majors: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    trainlevels: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    tasktypes: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      title: '添加期班',\r\n      open: false,\r\n      classinfo: {\r\n        id: undefined,\r\n        classno: undefined,\r\n        stunum: undefined,\r\n        termid: undefined,\r\n        deptid: undefined,\r\n        majorid: undefined,\r\n        trainlevelid: undefined,\r\n        tasktypeid: undefined\r\n      },\r\n      rules: {\r\n        classno: [\r\n          { required: true, message: '期班号不能为空', trigger: 'blur' }\r\n        ],\r\n        stunum: [\r\n          { required: true, message: '请填写学员人数', trigger: 'blur' }\r\n        ],\r\n        termid: [\r\n          { required: true, message: '请选择开课学期', trigger: 'change', type: 'number' }\r\n        ],\r\n        deptid: [\r\n          { required: true, message: '请选择管理机构', trigger: 'change', type: 'number' }\r\n        ],\r\n        majorid: [\r\n          { required: true, message: '请选择培训专业', trigger: 'change', type: 'number' }\r\n        ],\r\n        trainlevelid: [\r\n          { required: true, message: '请选择培训层次', trigger: 'change', type: 'number' }\r\n        ],\r\n        tasktypeid: [\r\n          { required: true, message: '请选择任务类别', trigger: 'change', type: 'number' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    closeForm() {\r\n      this.classinfo = {}\r\n      this.resetForm('addClassFormRef')\r\n      this.open = false\r\n    },\r\n    editClass(row) {\r\n      this.title = \"编辑期班信息\"\r\n      Object.assign(this.classinfo, row)\r\n      this.open = true\r\n    },\r\n    openDialog() {\r\n      this.open = true\r\n    },\r\n    submitForm() {\r\n      this.$refs.addClassFormRef.validate(valid => {\r\n        if(valid) {\r\n          this.classinfo.stunum = Number(this.classinfo.stunum)\r\n          this.classinfo.termid = Number(this.classinfo.termid)\r\n          this.classinfo.deptid = Number(this.classinfo.deptid)\r\n          this.classinfo.majorid = Number(this.classinfo.majorid)\r\n          this.classinfo.trainlevelid = Number(this.classinfo.trainlevelid)\r\n          this.classinfo.tasktypeid = Number(this.classinfo.tasktypeid)\r\n          if(this.classinfo.id > 0) {\r\n            updateClass(this.classinfo).then(() => {\r\n              let msg = res.message\r\n              let code = res.code\r\n              if(code == 7) {\r\n                this.$modal.notifyError(msg)\r\n              } else if(code == 9) {\r\n                this.$modal.msgSuccess(msg)\r\n                this.closeForm()\r\n              }\r\n            })\r\n          } else {\r\n            addClass(this.classinfo).then(res => {\r\n              let msg = res.message\r\n              let code = res.code\r\n              if(code == 7) {\r\n                this.$modal.notifyError(msg)\r\n              } else if(code == 8) {\r\n                this.$modal.msgSuccess(msg)\r\n                this.closeForm()\r\n              }\r\n            })\r\n          }\r\n          \r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\r\n</style>"]}]}