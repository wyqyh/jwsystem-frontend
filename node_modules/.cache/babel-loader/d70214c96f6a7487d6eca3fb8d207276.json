{"remainingRequest":"D:\\vue_workspace\\jwsystem\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue_workspace\\jwsystem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\jwsystem\\src\\views\\course\\add.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\jwsystem\\src\\views\\course\\add.vue","mtime":1679563062864},{"path":"D:\\vue_workspace\\jwsystem\\babel.config.js","mtime":1666484881107},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZ2V0Q2xhc3NCeUlkIH0gZnJvbSAiLi4vLi4vYXBpL2Jhc2ljZGF0YS9jbGFzcyI7CmltcG9ydCB7IGdldFRlYWNoZXJzIH0gZnJvbSAiLi4vLi4vYXBpL3N5c3RlbS91c2VyIjsKaW1wb3J0IHsgYWRkQ291cnNlIH0gZnJvbSAiLi4vLi4vYXBpL2NvdXJzZS9jb3Vyc2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FkZENvdXJzZScsCiAgcHJvcHM6IHsKICAgIHByYWN0aWNldHlwZXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgb3BlbjogZmFsc2UsCiAgICAgIHRpdGxlOiAn5re75Yqg6K++56iLJywKICAgICAgY2xhc3NpbmZvOiB7fSwKICAgICAgY291cnNlaW5mbzogewogICAgICAgIHVpZDogdGhpcy4kc3RvcmUuZ2V0dGVycy51aWQsCiAgICAgICAgY2xhc3NpZDogMCwKICAgICAgICB0ZWFjaGVyaWRzOiBbXSwKICAgICAgICBwcmltZTogW10KICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBjb3Vyc2VuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl6K++56iL5ZCN56ewJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHByYWN0aWNldHlwZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeWunui3teexu+WIqycsCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgIHR5cGU6ICdudW1iZXInCiAgICAgICAgfV0sCiAgICAgICAgcHJpbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nkuLsv6L6F6K6yJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHRlYWNoZXJpZHM6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nku7vor77mlZnlkZgnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgdGhlcm95aG91cjogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeeQhuiuuuWtpuaXticsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBwcmFjdGljZWhvdXI6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlrp7ot7Xlrabml7YnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgYmF0Y2hjb2VmZjogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaJueasoeezu+aVsCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICB0ZWFjaGVyczogW10KICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgZ2V0VGVhY2hlcnMoKS50aGVuKHJlcyA9PiB7CiAgICAgIHRoaXMudGVhY2hlcnMgPSByZXM7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9wZW5EaWFsb2coY2xhc3NpZCkgewogICAgICBpZiAoY2xhc3NpZCA+IDApIHsKICAgICAgICBnZXRDbGFzc0J5SWQoY2xhc3NpZCkudGhlbihyZXMgPT4gewogICAgICAgICAgdGhpcy5jb3Vyc2VpbmZvLmNsYXNzaWQgPSBjbGFzc2lkOwogICAgICAgICAgdGhpcy5jbGFzc2luZm8gPSByZXM7CiAgICAgICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuY2xhc3NpbmZvID0ge307CiAgICAgIHRoaXMuY291cnNlaW5mbyA9IHt9OwogICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgIH0sCiAgICBzdWJtaXRGb3JtKCkgewogICAgICB0aGlzLiRyZWZzLmNvdXJzZUluZm9SZWYudmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCIxMjMiKTsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGxldCBwcmltZXMgPSB0aGlzLmNvdXJzZWluZm8ucHJpbWU7CiAgICAgICAgICBpZiAocHJpbWVzICYmIHByaW1lcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGlmIChwcmltZXMubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgIC8v5ZCM5pe26YCJ5Lit5LqG5Li76K6y5ZKM6L6F6K6yCiAgICAgICAgICAgICAgdGhpcy5jb3Vyc2VpbmZvLnByaW1lID0gMjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLmNvdXJzZWluZm8ucHJpbWUgPSBOdW1iZXIocHJpbWVzWzBdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5jb3Vyc2VpbmZvLnVpZCA9IE51bWJlcih0aGlzLmNvdXJzZWluZm8udWlkKTsKICAgICAgICAgIHRoaXMuY291cnNlaW5mby50aGVyb3lob3VyID0gTnVtYmVyKHRoaXMuY291cnNlaW5mby50aGVyb3lob3VyKTsKICAgICAgICAgIHRoaXMuY291cnNlaW5mby5wcmFjdGljZWhvdXIgPSBOdW1iZXIodGhpcy5jb3Vyc2VpbmZvLnByYWN0aWNlaG91cik7CiAgICAgICAgICBhZGRDb3Vyc2UodGhpcy5jb3Vyc2VpbmZvKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGxldCBjb2RlID0gcmVzLmNvZGU7CiAgICAgICAgICAgIGxldCBtc2cgPSByZXMubWVzc2FnZTsKICAgICAgICAgICAgaWYgKGNvZGUgPT0gMTApIHsKICAgICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dFcnJvcihtc2cpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGUgPT0gMTEpIHsKICAgICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKG1zZyk7CiAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"mappings":"AAwHA;AACA;AACA;AAEA;EACAA;EACAC;IACAC;MACAC;MACAC;QACA;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;MAEA;MACAC;QACAC,aACA;UAAAC;UAAAC;UAAAC;QAAA,EACA;QACAC,eACA;UAAAH;UAAAC;UAAAC;UAAAf;QAAA,EACA;QACAU,QACA;UAAAG;UAAAC;UAAAC;QAAA,EACA;QACAN,aACA;UAAAI;UAAAC;UAAAC;QAAA,EACA;QACAE,aACA;UAAAJ;UAAAC;UAAAC;QAAA,EACA;QACAG,eACA;UAAAL;UAAAC;UAAAC;QAAA,EACA;QACAI,aACA;UAAAN;UAAAC;UAAAC;QAAA;MAEA;MACAK;IACA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACAC;MACA;QACAC;UACA;UACA;UACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;QACAC;QACA;UACA;UACA;YACA;cAAA;cACA;YACA;cACA;YACA;UACA;UACA;UACA;UACA;UACAC;YACA;YACA;YACA;cACA;YACA;cACA;cACA;YACA;UACA;QACA;MACA;IACA;EACA;AACA","names":["name","props","practicetypes","type","default","data","open","title","classinfo","courseinfo","uid","classid","teacherids","prime","rules","coursename","required","message","trigger","practicetype","theroyhour","practicehour","batchcoeff","teachers","created","getTeachers","methods","openDialog","getClassById","closeDialog","submitForm","console","addCourse"],"sourceRoot":"src/views/course","sources":["add.vue"],"sourcesContent":["<template>\r\n  <el-dialog\r\n    :title=\"title\"\r\n    :visible.sync=\"open\"\r\n    width=\"800px\"\r\n    @close=\"closeDialog\"\r\n  >\r\n    <el-form label-width=\"100px\" :model=\"courseinfo\" ref=\"courseInfoRef\" :rules=\"rules\">\r\n      <el-divider>期班信息</el-divider>\r\n      <el-row>\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"期班号\">\r\n            <el-input v-model=\"classinfo.classno\" disabled/>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"专业名称\">\r\n            <el-input v-model=\"classinfo.majorname\" disabled/>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"开课学期\">\r\n            <el-input v-model=\"classinfo.term\" disabled/>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"培训层次\">\r\n            <el-input v-model=\"classinfo.trainlevel\" disabled/>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"学员人数\">\r\n            <el-input v-model=\"classinfo.stunum\" disabled/>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"任务类别\">\r\n            <el-input v-model=\"classinfo.tasktype\" disabled/>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-divider>课程信息</el-divider>\r\n      <el-row>\r\n        <el-col :span=\"10\">\r\n          <el-form-item label=\"课程名称\" prop=\"coursename\">\r\n            <el-input placeholder=\"请输入课程名称\" v-model=\"courseinfo.coursename\"/>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"14\">\r\n          <el-form-item label=\"任课教员\" prop=\"teacherids\">\r\n            <el-select v-model=\"courseinfo.teacherids\" multiple\r\n              placeholder=\"请选择任课教员\" style=\"width: 100%\">\r\n              <el-option\r\n                v-for=\"item in teachers\"\r\n                :key=\"item.id\"\r\n                :label=\"item.name\"\r\n                :value=\"item.id\">\r\n                <span style=\"float: left\">{{ item.name }}</span>\r\n                <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.level2dept }}</span>\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"13\">\r\n          <el-form-item label=\"实践类别\" prop=\"practicetype\">\r\n            <el-select v-model=\"courseinfo.practicetype\" placeholder=\"请选择实践类别\" \r\n              clearable size=\"medium\"  style=\"width: 100%\">\r\n              <el-option\r\n                v-for=\"item in practicetypes\"\r\n                :key=\"item.id\"\r\n                :label=\"item.name\"\r\n                :value=\"item.id\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"11\">\r\n          <el-form-item label=\"主/辅讲\" prop=\"prime\">\r\n            <el-select v-model=\"courseinfo.prime\" multiple placeholder=\"请选择主/辅讲\" clearable size=\"medium\">\r\n              <el-option key=\"1\" label=\"主讲\" value=\"1\"/>\r\n              <el-option key=\"0\" label=\"辅讲\" value=\"0\"/>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"8\">\r\n          <el-form-item label=\"理论学时\" prop=\"theroyhour\">\r\n            <el-input placeholder=\"请输入理论学时\" v-model=\"courseinfo.theroyhour\"/>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item label=\"实践学时\" prop=\"practicehour\">\r\n            <el-input placeholder=\"请输入实践学时\" v-model=\"courseinfo.practicehour\"/>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-form-item label=\"批次系数\" prop=\"batchcoeff\">\r\n            <el-input placeholder=\"请输入批次系数\" v-model=\"courseinfo.batchcoeff\"/>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"24\" style=\"text-align: right\">\r\n          <el-button type=\"primary\" @click=\"submitForm\">确定</el-button>\r\n          <el-button @click=\"closeDialog\">取消</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { getClassById } from \"../../api/basicdata/class\"\r\nimport { getTeachers } from \"../../api/system/user\"\r\nimport { addCourse } from \"../../api/course/course\"\r\n\r\nexport default {\r\n  name: 'AddCourse',\r\n  props: {\r\n    practicetypes: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      open: false,\r\n      title: '添加课程',\r\n      classinfo: {},\r\n      courseinfo: {\r\n        uid: this.$store.getters.uid,\r\n        classid: 0,\r\n        teacherids: [],\r\n        prime: []\r\n\r\n      },\r\n      rules: {\r\n        coursename: [\r\n          { required: true, message: '请输入课程名称', trigger: 'blur' }\r\n        ],\r\n        practicetype: [\r\n           { required: true, message: '请选择实践类别', trigger: 'change', type: 'number' }\r\n        ],\r\n        prime: [\r\n           { required: true, message: '请选择主/辅讲', trigger: 'blur' }\r\n        ],\r\n        teacherids: [\r\n          { required: true, message: '请选择任课教员', trigger: 'blur' }\r\n        ],\r\n        theroyhour: [\r\n          { required: true, message: '请输入理论学时', trigger: 'blur' }\r\n        ],\r\n        practicehour: [\r\n          { required: true, message: '请输入实践学时', trigger: 'blur' }\r\n        ],\r\n        batchcoeff: [\r\n          { required: true, message: '请输入批次系数', trigger: 'blur' }\r\n        ]\r\n      },\r\n      teachers: []\r\n    }\r\n  },\r\n  created() {\r\n    getTeachers().then(res => {\r\n      this.teachers = res\r\n    })\r\n  },\r\n  methods: {\r\n    openDialog(classid) {\r\n      if(classid > 0) {\r\n        getClassById(classid).then(res => {\r\n          this.courseinfo.classid = classid\r\n          this.classinfo = res\r\n          this.open = true\r\n        })\r\n      }\r\n    },\r\n    closeDialog() {\r\n      this.classinfo = {}\r\n      this.courseinfo = {}\r\n      this.open = false\r\n    },\r\n    submitForm() {\r\n      this.$refs.courseInfoRef.validate(valid => {\r\n        console.log(\"123\")\r\n        if(valid) {\r\n          let primes = this.courseinfo.prime\r\n          if(primes && primes.length > 0) {\r\n            if(primes.length > 1) { //同时选中了主讲和辅讲\r\n              this.courseinfo.prime = 2\r\n            } else {\r\n              this.courseinfo.prime = Number(primes[0])\r\n            }\r\n          }\r\n          this.courseinfo.uid = Number(this.courseinfo.uid)\r\n          this.courseinfo.theroyhour = Number(this.courseinfo.theroyhour)\r\n          this.courseinfo.practicehour = Number(this.courseinfo.practicehour)\r\n          addCourse(this.courseinfo).then(res => {\r\n            let code = res.code\r\n            let msg = res.message\r\n            if(code == 10) {\r\n              this.$modal.msgError(msg)\r\n            }  else if(code == 11) {\r\n              this.$modal.msgSuccess(msg)\r\n              this.closeDialog()\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\r\n</style>"]}]}