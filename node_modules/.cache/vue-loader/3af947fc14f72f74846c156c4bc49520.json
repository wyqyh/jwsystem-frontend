{"remainingRequest":"D:\\vue_workspace\\jwsystem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\jwsystem\\src\\views\\basicdata\\type\\category.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\jwsystem\\src\\views\\basicdata\\type\\category.vue","mtime":1679323878839},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoNCmltcG9ydCB7IGFkZFR5cGUsIGdldEFsbFR5cGUgfSBmcm9tICcuLi8uLi8uLi9hcGkvYmFzaWNkYXRhL3R5cGUnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ1R5cGVDYXRlZ29yeScsDQogIHByb3BzOiB7DQogICAgYWRkVHlwZU9wZW46IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZQ0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBhZGRUeXBlT3BlbihvbGRWYWwsIG5ld1ZhbCkgew0KICAgICAgdGhpcy5zaG93RGlhbG9nID0gdGhpcy5hZGRUeXBlT3Blbg0KICAgIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdHlwZUxpc3Q6IFtdLA0KICAgICAgZm9ybTogew0KICAgICAgICB0eXBlbm86ICcnLA0KICAgICAgICB0eXBlbmFtZTogJycNCiAgICAgIH0sDQogICAgICBzaG93RGlhbG9nOiBmYWxzZSwNCiAgICAgIGRlZmF1bHRQcm9wczogew0KICAgICAgICBsYWJlbDogJ25hbWUnDQogICAgICB9LA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgdHlwZW5hbWU6IFsNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfliIbnsbvlkI3np7DkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfQ0KICAgICAgICBdLA0KICAgICAgICB0eXBlbm86IFsNCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfliIbnsbvnvJblj7fkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfQ0KICAgICAgICBdDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMubG9hZFR5cGUoKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgbG9hZFR5cGUoKSB7DQogICAgICBnZXRBbGxUeXBlKCkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLnR5cGVMaXN0ID0gcmVzDQogICAgICB9KQ0KICAgIH0sDQogICAgc2VsZWN0VHlwZShub2RlLCBrZXksIGhhbGZOb2RlLCBoYWxmS2V5KSB7DQogICAgICB0aGlzLiRlbWl0KCdzZW5kVHlwZWlkcycsIGtleS5jaGVja2VkS2V5cykNCiAgICB9LA0KICAgIHN1Ym1pdEZvcm0oKSB7DQogICAgICB0aGlzLiRyZWZzLmFkZFR5cGVGb3JtUmVmLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgaWYodmFsaWQpIHsNCiAgICAgICAgICBhZGRUeXBlKHsndHlwZW5vJzogdGhpcy5mb3JtLnR5cGVubywgJ25hbWUnOiB0aGlzLmZvcm0udHlwZW5hbWV9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIua3u+WKoOexu+WIq+WIhuexu+aIkOWKnyIpDQogICAgICAgICAgICB0aGlzLmxvYWRUeXBlKCkNCiAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2xvc2VEaWFsb2coKQ0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVDbG9zZURpYWxvZygpIHsNCiAgICAgIHRoaXMucmVzZXRGb3JtKCdhZGRUeXBlRm9ybVJlZicpDQogICAgICB0aGlzLnNob3dEaWFsb2cgPSBmYWxzZQ0KICAgICAgdGhpcy4kZW1pdCgnY2xvc2VBZGRUeXBlJykNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["category.vue"],"names":[],"mappings":";;AA4BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"category.vue","sourceRoot":"src/views/basicdata/type","sourcesContent":["<template>\r\n  <div>\r\n    <el-tree ref=\"tree\" :data=\"typeList\" show-checkbox empty-text=\"暂无查询到类别数据\" node-key=\"id\"\r\n      @check=\"selectType\" highlight-current default-expand-all :expand-on-click-node=\"false\" :props=\"defaultProps\">\r\n      <span slot-scope=\"{ data }\">\r\n        {{data.name}}（{{data.no}}）\r\n      </span>\r\n    </el-tree>\r\n    \r\n    <el-dialog :visible.sync=\"showDialog\" title=\"添加类别分类\" @close=\"handleCloseDialog\" width=\"500px\">\r\n      <el-form ref=\"addTypeFormRef\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n        <el-form-item label=\"分类编号\" prop=\"typeno\">\r\n          <el-input v-model=\"form.typeno\" placeholder=\"请输入分类编号\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"分类名称\" prop=\"typename\">\r\n          <el-input v-model=\"form.typename\" placeholder=\"请输入分类名称\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button type=\"primary\" @click=\"submitForm\">确定</el-button>\r\n        <el-button @click=\"handleCloseDialog\">取消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { addType, getAllType } from '../../../api/basicdata/type'\r\n\r\nexport default {\r\n  name: 'TypeCategory',\r\n  props: {\r\n    addTypeOpen: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  watch: {\r\n    addTypeOpen(oldVal, newVal) {\r\n      this.showDialog = this.addTypeOpen\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      typeList: [],\r\n      form: {\r\n        typeno: '',\r\n        typename: ''\r\n      },\r\n      showDialog: false,\r\n      defaultProps: {\r\n        label: 'name'\r\n      },\r\n      rules: {\r\n        typename: [\r\n            { required: true, message: '分类名称不能为空', trigger: 'blur' }\r\n        ],\r\n        typeno: [\r\n            { required: true, message: '分类编号不能为空', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.loadType()\r\n  },\r\n  methods: {\r\n    loadType() {\r\n      getAllType().then(res => {\r\n        this.typeList = res\r\n      })\r\n    },\r\n    selectType(node, key, halfNode, halfKey) {\r\n      this.$emit('sendTypeids', key.checkedKeys)\r\n    },\r\n    submitForm() {\r\n      this.$refs.addTypeFormRef.validate(valid => {\r\n        if(valid) {\r\n          addType({'typeno': this.form.typeno, 'name': this.form.typename}).then(() => {\r\n            this.$modal.msgSuccess(\"添加类别分类成功\")\r\n            this.loadType()\r\n            this.handleCloseDialog()\r\n          })\r\n        }\r\n      })\r\n    },\r\n    handleCloseDialog() {\r\n      this.resetForm('addTypeFormRef')\r\n      this.showDialog = false\r\n      this.$emit('closeAddType')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\r\n</style>"]}]}