{"remainingRequest":"D:\\vue_workspace\\jwsystem\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue_workspace\\jwsystem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\jwsystem\\src\\views\\basicdata\\class\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\jwsystem\\src\\views\\basicdata\\class\\index.vue","mtime":1679486293184},{"path":"D:\\vue_workspace\\jwsystem\\babel.config.js","mtime":1666484881107},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IGdldERlcHQgfSBmcm9tICIuLi8uLi8uLi9hcGkvc3lzdGVtL2RlcHQiOwppbXBvcnQgeyBnZXRUeXBlRGF0YUJ5VHlwZW5vcyB9IGZyb20gIi4uLy4uLy4uL2FwaS9iYXNpY2RhdGEvdHlwZSI7CmltcG9ydCB7IGdldENsYXNzbm8sIGxpc3RDbGFzcywgZGVsZXRlQ2xhc3MgfSBmcm9tICIuLi8uLi8uLi9hcGkvYmFzaWNkYXRhL2NsYXNzIjsKaW1wb3J0IHsgdXBsb2FkU3R1aW5mbyB9IGZyb20gIi4uLy4uLy4uL2FwaS9iYXNpY2RhdGEvc3R1ZGVudCI7CmltcG9ydCBUcmVlU2VsZWN0IGZyb20gJ0ByaW9waGFlL3Z1ZS10cmVlc2VsZWN0JzsKaW1wb3J0ICdAcmlvcGhhZS92dWUtdHJlZXNlbGVjdC9kaXN0L3Z1ZS10cmVlc2VsZWN0LmNzcyc7CmltcG9ydCBBZGRDbGFzcyBmcm9tICIuL2FkZGNsYXNzLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ291cnNlTWFuYWdlJywKICBjb21wb25lbnRzOiB7CiAgICBUcmVlU2VsZWN0LAogICAgQWRkQ2xhc3MKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjbGFzc25vczogW10sCiAgICAgIHRlcm1zOiBbXSwKICAgICAgZGVwdHM6IFtdLAogICAgICBtYWpvcnM6IFtdLAogICAgICB0cmFpbmxldmVsczogW10sCiAgICAgIHRhc2t0eXBlczogW10sCiAgICAgIHF1ZXJ5UGFyYW1zOiB7CiAgICAgICAgY2xhc3Nub3M6IFtdLAogICAgICAgIHRlcm1pZHM6IFtdLAogICAgICAgIGRlcHRpZHM6IFtdLAogICAgICAgIG1ham9yaWRzOiBbXSwKICAgICAgICB0cmFpbmxldmVsaWRzOiBbXSwKICAgICAgICB0YXNrdHlwZWlkczogW10sCiAgICAgICAgcGFnZW51bTogMSwKICAgICAgICBwYWdlc2l6ZTogMTAKICAgICAgfSwKICAgICAgdG90YWw6IDAsCiAgICAgIGV4cG9ydFhsc01vZGVVcmw6ICdodHRwOi8vbG9jYWxob3N0OjgwODMvc3R1L2V4cG9ydC94bHNtb2RlbCcsCiAgICAgIHVwbG9hZDogewogICAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxgu+8iOeUqOaIt+WvvOWFpe+8iQogICAgICAgIG9wZW46IGZhbHNlLAogICAgICAgIC8vIOW8ueWHuuWxguagh+mimO+8iOeUqOaIt+WvvOWFpe+8iQogICAgICAgIHRpdGxlOiAiIgogICAgICB9LAogICAgICBjbGFzc2VzOiBbXSwKICAgICAgc2VsZWN0ZWRJZHM6IFtdLAogICAgICBzaW5nbGU6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGdldENsYXNzbm8oKS50aGVuKHJlcyA9PiB7CiAgICAgIHRoaXMuY2xhc3Nub3MgPSByZXM7CiAgICB9KTsKICAgIGdldERlcHQoKS50aGVuKHJlcyA9PiB7CiAgICAgIHRoaXMuZGVwdHMgPSB0aGlzLmdldFRyZWUocmVzKTsKICAgIH0pOwogICAgZ2V0VHlwZURhdGFCeVR5cGVub3MoWycxMDAxJywgJzEwMDInLCAnMTAxMCcsICcxMDExJ10pLnRoZW4ocmVzID0+IHsKICAgICAgbGV0IHJlc3VsdCA9IGV2YWwocmVzKTsKICAgICAgdGhpcy50cmFpbmxldmVscyA9IHJlc3VsdFsnMTAwMSddOwogICAgICB0aGlzLnRhc2t0eXBlcyA9IHJlc3VsdFsnMTAwMiddOwogICAgICB0aGlzLm1ham9ycyA9IHJlc3VsdFsnMTAxMCddOwogICAgICB0aGlzLnRlcm1zID0gcmVzdWx0WycxMDExJ107CiAgICB9KSwgdGhpcy5sb2FkQ2xhc3MoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFRyZWUodHJlZSA9IFtdKSB7CiAgICAgIGxldCBhcnIgPSBbXTsKICAgICAgaWYgKHRyZWUubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgdHJlZS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgbGV0IG9iaiA9IHt9OwogICAgICAgICAgb2JqLmxhYmVsID0gaXRlbS5uYW1lOwogICAgICAgICAgb2JqLmlkID0gaXRlbS5pZDsKICAgICAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7CiAgICAgICAgICAgIG9iai5jaGlsZHJlbiA9IHRoaXMuZ2V0VHJlZShpdGVtLmNoaWxkcmVuKTsKICAgICAgICAgIH0KICAgICAgICAgIGFyci5wdXNoKG9iaik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGFycjsKICAgIH0sCiAgICBoYW5kbGVJbXBvcnQoKSB7CiAgICAgIHRoaXMudXBsb2FkLnRpdGxlID0gIuWtpuWRmOS/oeaBr+WvvOWFpSI7CiAgICAgIHRoaXMudXBsb2FkLm9wZW4gPSB0cnVlOwogICAgfSwKICAgIC8vIOaPkOS6pOS4iuS8oOaWh+S7tgogICAgc3VibWl0RmlsZUZvcm0oKSB7CiAgICAgIHRoaXMuJHJlZnMudXBsb2FkLnN1Ym1pdCgpOwogICAgfSwKICAgIC8vIOaPkOS6pOS4iuS8oOaWh+S7tgogICAgdXBsb2FkU3R1aW5mbyhwYXJhbSkgewogICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgbGV0IHN0dXhscyA9IHBhcmFtLmZpbGU7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnc3R1aW5mbycsIHN0dXhscywgc3R1eGxzLmZpbGVuYW1lKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCdjbGFzc2lkJywgdGhpcy5zZWxlY3RlZElkc1swXSk7CiAgICAgIHVwbG9hZFN0dWluZm8oZm9ybURhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICBsZXQgbXNnID0gcmVzLm1lc3NhZ2U7CiAgICAgICAgdGhpcy4kbW9kYWwubm90aWZ5U3VjY2Vzcyhtc2cpOwogICAgICAgIHRoaXMudXBsb2FkLm9wZW4gPSBmYWxzZTsKICAgICAgICB0aGlzLiRyZWZzLnVwbG9hZC5jbGVhckZpbGVzKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUFkZCgpIHsKICAgICAgdGhpcy4kcmVmcy5hZGRDbGFzc0RpYWxvZy5vcGVuRGlhbG9nKCk7CiAgICB9LAogICAgcmVzZXRRdWVyeSgpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtcyA9IHsKICAgICAgICAncGFnZW51bSc6IDEsCiAgICAgICAgJ3BhZ2VzaXplJzogMTAKICAgICAgfTsKICAgIH0sCiAgICBsb2FkQ2xhc3MoKSB7CiAgICAgIGxpc3RDbGFzcyh0aGlzLnF1ZXJ5UGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5jbGFzc2VzID0gcmVzLmxpc3Q7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy50b3RhbDsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlVXBkYXRlKHJvdykgewogICAgICB0aGlzLiRyZWZzLmFkZENsYXNzRGlhbG9nLmVkaXRDbGFzcyhyb3cpOwogICAgfSwKICAgIGhhbmRsZURlbGV0ZShyb3cpIHsKICAgICAgLy8g5Yig6Zmk5p+Q6KGMCiAgICAgIGlmIChyb3cpIHsKICAgICAgICB0aGlzLnNlbGVjdGVkSWRzLnB1c2gocm93LmlkKTsKICAgICAgfQogICAgICBkZWxldGVDbGFzcyh0aGlzLnNlbGVjdGVkSWRzKS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCLliKDpmaTmiJDlip8iKTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLnNlbGVjdGVkSWRzID0gdmFsLm1hcChpdGVtID0+IGl0ZW0uaWQpOwogICAgICB0aGlzLnNpbmdsZSA9IHRoaXMuc2VsZWN0ZWRJZHMubGVuZ3RoID09IDE7CiAgICB9LAogICAgdmlld1N0dWRlbnQocm93KSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL2NsYXNzL3N0dWRlbnQnLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBjbGFzc2luZm86IHJvdwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";AAqKA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAN;QACAO;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MAEA;MACAC;MACAC;MACAC;QACA;QACAC;QACA;QACAC;MACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA,IACA;EACA;EACAC;IACAC;MACA;MACA;QACAC;UACA;UACAC;UACAA;UACA;YACAA;UACA;UACAC;QACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;MACAC;MACAA;MACAD;QACA;QACA;QACA;QACA;MACA;IACA;IACAE;MACA;IACA;IACAC;MACA;QAAA;QAAA;MAAA;IACA;IACAC;MACAC;QACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;MACAC;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;QAAAC;QAAAC;UAAAC;QAAA;MAAA;IACA;EACA;AACA","names":["name","components","TreeSelect","AddClass","data","classnos","terms","depts","majors","trainlevels","tasktypes","queryParams","termids","deptids","majorids","trainlevelids","tasktypeids","pagenum","pagesize","total","exportXlsModeUrl","upload","open","title","classes","selectedIds","single","created","getClassno","getDept","getTypeDataByTypenos","methods","getTree","tree","obj","arr","handleImport","submitFileForm","uploadStuinfo","formData","handleAdd","resetQuery","loadClass","listClass","handleUpdate","handleDelete","deleteClass","handleSelectionChange","viewStudent","path","query","classinfo"],"sourceRoot":"src/views/basicdata/class","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form :inline=\"true\" ref=\"queryForm\" :model=\"queryParams\">\r\n      <el-form-item label=\"期班号\" prop=\"classnos\">\r\n        <el-select v-model=\"queryParams.classnos\" multiple placeholder=\"请选择\" clearable size=\"medium\">\r\n          <el-option v-for=\"item in classnos\" :key=\"item\" :label=\"item\" :value=\"item\" />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"开课学期\" prop=\"terms\">\r\n       <el-select v-model=\"queryParams.termids\" multiple placeholder=\"请选择\" clearable size=\"medium\">\r\n          <el-option\r\n            v-for=\"item in terms\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"管理机构\" prop=\"depts\">\r\n        <tree-select \r\n          :multiple=\"true\"\r\n          :options=\"depts\" \r\n          :show-count=\"true\"\r\n          v-model=\"queryParams.deptids\"\r\n          :value=\"queryParams.deptids\"></tree-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"专业名称\" prop=\"majors\">\r\n        <el-select v-model=\"queryParams.majorids\" multiple placeholder=\"请选择\" clearable size=\"medium\">\r\n          <el-option\r\n            v-for=\"item in majors\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"培训层次\" prop=\"trainlevels\">\r\n       <el-select v-model=\"queryParams.trainlevels\" multiple placeholder=\"请选择\" clearable size=\"medium\">\r\n          <el-option\r\n            v-for=\"item in trainlevels\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"任务类别\" prop=\"tasktypes\">\r\n        <el-select v-model=\"queryParams.tasktypeids\" multiple placeholder=\"请选择\" clearable size=\"medium\">\r\n          <el-option\r\n            v-for=\"item in tasktypes\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button \r\n          type=\"primary\" \r\n          size=\"mini\" \r\n          icon=\"el-icon-search\"\r\n          @click=\"loadClass\">搜索</el-button>\r\n        <el-button \r\n          icon=\"el-icon-refresh\"\r\n          size=\"mini\"\r\n          @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <el-row :gutter=\"10\">\r\n      <el-col :span=\"1.5\">\r\n        <el-button \r\n          type=\"primary\" \r\n          size=\"mini\" \r\n          icon=\"el-icon-circle-plus-outline\"\r\n          plain\r\n          @click=\"handleAdd\">新增</el-button>\r\n      </el-col>\r\n      <el-col :span=\"1.5\">\r\n        <el-button \r\n          type=\"warning\" \r\n          size=\"mini\" \r\n          icon=\"el-icon-files\"\r\n          plain \r\n          :disabled=\"!single\"\r\n          @click=\"handleImport\">学员导入</el-button>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!-- 用户导入对话框 -->\r\n    <el-dialog :title=\"upload.title\" :visible.sync=\"upload.open\" width=\"400px\" append-to-body>\r\n      <el-upload\r\n        ref=\"upload\"\r\n        :limit=\"1\"\r\n        accept=\".xlsx, .xls\"\r\n        action=\"\"\r\n        :disabled=\"upload.isUploading\"\r\n        :auto-upload=\"false\"\r\n        :http-request=\"uploadStuinfo\"\r\n        drag\r\n      >\r\n        <i class=\"el-icon-upload\"></i>\r\n        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n        <div class=\"el-upload__tip text-center\" slot=\"tip\">\r\n          <span>仅允许导入xls、xlsx格式文件。</span>\r\n          <el-link type=\"primary\" :underline=\"false\" style=\"font-size:12px;vertical-align: baseline;\" \r\n            :href=\"exportXlsModeUrl\">下载模板</el-link>\r\n        </div>\r\n      </el-upload>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitFileForm\">确 定</el-button>\r\n        <el-button @click=\"upload.open = false\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <add-class :classnos=\"classnos\" :terms=\"terms\" :depts=\"depts\" :majors=\"majors\"\r\n      :tasktypes=\"tasktypes\" :trainlevels=\"trainlevels\" ref=\"addClassDialog\"/>\r\n\r\n    <el-table :data=\"classes\" row-key=\"id\" ref=\"classTable\" @selection-change=\"handleSelectionChange\">\r\n      <el-table-column type=\"selection\" width=\"55px\" align=\"center\"></el-table-column>\r\n      <el-table-column label=\"期班号\" prop=\"classno\" width=\"100px\"></el-table-column>\r\n      <el-table-column label=\"学员人数\" prop=\"stunum\" width=\"80px\"></el-table-column>\r\n      <el-table-column label=\"开课学期\" prop=\"term\" width=\"150px\"></el-table-column>\r\n      <el-table-column label=\"管理机构\" prop=\"deptname\" width=\"350px\"></el-table-column>\r\n      <el-table-column label=\"培训层次\" prop=\"trainlevel\" width=\"150px\"></el-table-column>\r\n      <el-table-column label=\"培训专业\" prop=\"majorname\" width=\"150px\"></el-table-column>\r\n      <el-table-column label=\"任务类别\" prop=\"tasktype\" width=\"150px\"></el-table-column>\r\n      <el-table-column label=\"创建时间\" prop=\"createTime\" width=\"150px\"></el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-edit\"\r\n            @click=\"handleUpdate(scope.row)\">\r\n            修改\r\n          </el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"success\"\r\n            @click=\"viewStudent(scope.row)\"\r\n            icon=\"el-icon-view\">\r\n            查看学员\r\n          </el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"danger\"\r\n            @click=\"handleDelete(scope.row)\"\r\n            icon=\"el-icon-delete\">\r\n            删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <pagination\r\n      :total=\"total\"\r\n      :pageSizes=\"[10, 20, 30, 50]\"\r\n      :page.sync=\"queryParams.pagenum\"\r\n      :limit.sync=\"queryParams.pagesize\"\r\n      @pagination=\"loadClass\"></pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { getDept } from \"../../../api/system/dept\"\r\nimport { getTypeDataByTypenos } from \"../../../api/basicdata/type\"\r\nimport { getClassno, listClass, deleteClass } from \"../../../api/basicdata/class\" \r\nimport { uploadStuinfo } from \"../../../api/basicdata/student\"\r\nimport TreeSelect from '@riophae/vue-treeselect'\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\r\nimport AddClass from \"./addclass.vue\"\r\n\r\nexport default {\r\n  name: 'CourseManage',\r\n  components: {\r\n    TreeSelect,\r\n    AddClass\r\n  },\r\n  data() {\r\n    return {\r\n      classnos: [],\r\n      terms: [],\r\n      depts: [],\r\n      majors: [],\r\n      trainlevels: [],\r\n      tasktypes: [],\r\n      queryParams: {\r\n        classnos: [],\r\n        termids: [],\r\n        deptids: [],\r\n        majorids: [],\r\n        trainlevelids: [],\r\n        tasktypeids: [],\r\n        pagenum: 1,\r\n        pagesize: 10\r\n\r\n      },\r\n      total: 0,\r\n      exportXlsModeUrl: 'http://localhost:8083/stu/export/xlsmodel',\r\n      upload: {\r\n        // 是否显示弹出层（用户导入）\r\n        open: false,\r\n        // 弹出层标题（用户导入）\r\n        title: \"\"\r\n      },\r\n      classes: [],\r\n      selectedIds: [],\r\n      single: false\r\n    }\r\n  },\r\n  created() {\r\n    getClassno().then(res => {\r\n      this.classnos = res\r\n    })\r\n    getDept().then(res => {\r\n      this.depts = this.getTree(res)\r\n    })\r\n    getTypeDataByTypenos(['1001', '1002', '1010', '1011']).then(res => {\r\n      let result = eval(res)\r\n      this.trainlevels = result['1001']\r\n      this.tasktypes = result['1002']\r\n      this.majors = result['1010']\r\n      this.terms = result['1011']\r\n    }),\r\n    this.loadClass()\r\n  },\r\n  methods: {\r\n    getTree(tree = []) {\r\n      let arr = [];\r\n      if(tree.length !== 0) {\r\n        tree.forEach(item => {\r\n          let obj = {}\r\n          obj.label = item.name\r\n          obj.id = item.id\r\n          if(item.children) {\r\n            obj.children = this.getTree(item.children)\r\n          }\r\n          arr.push(obj)\r\n        })\r\n      }\r\n      return arr\r\n    },\r\n    handleImport() {\r\n      this.upload.title = \"学员信息导入\";\r\n      this.upload.open = true;\r\n    },\r\n    // 提交上传文件\r\n    submitFileForm() {\r\n      this.$refs.upload.submit();\r\n    },\r\n    // 提交上传文件\r\n    uploadStuinfo(param) {\r\n      let formData = new FormData()\r\n      let stuxls = param.file\r\n      formData.append('stuinfo', stuxls, stuxls.filename)\r\n      formData.append('classid', this.selectedIds[0])\r\n      uploadStuinfo(formData).then(res => {\r\n        let msg = res.message\r\n        this.$modal.notifySuccess(msg)\r\n        this.upload.open = false;\r\n        this.$refs.upload.clearFiles();\r\n      })\r\n    },\r\n    handleAdd() {\r\n      this.$refs.addClassDialog.openDialog()\r\n    },\r\n    resetQuery() {\r\n      this.queryParams = { 'pagenum': 1, 'pagesize': 10 }\r\n    },\r\n    loadClass() {\r\n      listClass(this.queryParams).then(res => {\r\n        this.classes = res.list\r\n        this.total = res.total\r\n      })\r\n    },\r\n    handleUpdate(row) {\r\n      this.$refs.addClassDialog.editClass(row)\r\n    },\r\n    handleDelete(row) {\r\n      // 删除某行\r\n      if(row) {\r\n        this.selectedIds.push(row.id)\r\n      }\r\n      deleteClass(this.selectedIds).then(() => {\r\n        this.$modal.msgSuccess(\"删除成功\")\r\n      })\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.selectedIds = val.map(item => item.id)\r\n      this.single = this.selectedIds.length == 1\r\n    },\r\n    viewStudent(row) {\r\n      this.$router.push({ path: '/class/student', query: {classinfo: row} })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\r\n.vue-treeselect {\r\n  width: 250px;\r\n  line-height: 28px;\r\n  padding-top: 3px;\r\n  .vue-treeselect__placeholder {\r\n    line-height: 28px;\r\n  }\r\n  .vue-treeselect__control {\r\n    height: 35px !important;\r\n    .vue-treeselect__value-container {\r\n      line-height: 20px;\r\n    }\r\n  }\r\n}\r\n\r\n</style>"]}]}