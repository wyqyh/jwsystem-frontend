{"remainingRequest":"D:\\vue_workspace\\filemanage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\filemanage\\src\\components\\TreeSelect\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\filemanage\\src\\components\\TreeSelect\\index.vue","mtime":1672716154206},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdUcmVlU2VsZWN0JywNCiAgcHJvcHM6IHsNCiAgICBwcm9wczogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgZGVmYXVsdDogKCkgPT4gew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgIHZhbHVlOiAnaWQnLA0KICAgICAgICAgIGxhYmVsOiAnbmFtZScsDQogICAgICAgICAgY2hpbGRyZW46ICdjaGlsZHJlbicNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgb3B0aW9uczogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0OiAoKSA9PiB7DQogICAgICAgIHJldHVybiBbXQ0KICAgICAgfQ0KICAgIH0sDQogICAgdmFsdWU6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsNCiAgICAgICAgcmV0dXJuIHt9DQogICAgICB9DQogICAgfSwNCiAgICB2YWx1ZU11bHRpcGxlOiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsNCiAgICAgICAgcmV0dXJuIFtdDQogICAgICB9DQogICAgfSwNCiAgICBjbGVhcmFibGU6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiB0cnVlDQogICAgfSwNCiAgICAvL+iHquWKqOaUtui1tw0KICAgIGFjY29yZGlvbjogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfSwNCiAgICBtdWx0aXBsZTogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICByZXN1bHRWYWx1ZTogW10sDQogICAgICB2YWx1ZU5hbWU6IHRoaXMubXVsdGlwbGUgPyBbXSA6ICcnDQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgIHZhbHVlKCkgew0KICAgICAgdGhpcy5yZXN1bHRWYWx1ZSA9IHRoaXMubXVsdGlwbGUgPyB0aGlzLnZhbHVlTXVsdGlwbGUgOiB0aGlzLnZhbHVlDQogICAgICB0aGlzLmluaXRIYW5kbGUoKQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLnJlc3VsdFZhbHVlID0gdGhpcy5tdWx0aXBsZSA/IHRoaXMudmFsdWVNdWx0aXBsZSA6IHRoaXMudmFsdWUNCiAgICB0aGlzLmluaXRIYW5kbGUoKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaW5pdEhhbmRsZSgpIHsNCiAgICAgIGlmKHRoaXMucmVzdWx0VmFsdWUpIHsNCiAgICAgICAgaWYodGhpcy5tdWx0aXBsZSkgew0KICAgICAgICAgIHRoaXMucmVzdWx0VmFsdWUuZm9yRWFjaChpdGVtID0+IHRoaXMudmFsdWVOYW1lLnB1c2goaXRlbS5uYW1lKSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnZhbHVlTmFtZSA9IHRoaXMucmVzdWx0VmFsdWUubmFtZQ0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLmluaXRTY3JvbGwoKQ0KICAgIH0sDQogICAgaW5pdFNjcm9sbCgpIHsNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgbGV0IHNjcm9sbFdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWwtc2Nyb2xsYmFyIC5lbC1zZWxlY3QtZHJvcGRvd25fX3dyYXAnKVswXQ0KICAgICAgICBsZXQgc2Nyb2xsQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVsLXNjcm9sbGJhciAuZWwtc2Nyb2xsYmFyX19iYXInKQ0KICAgICAgICBzY3JvbGxXcmFwLnN0eWxlLmNzc1RleHQgPSAnbWFyZ2luOiAwcHg7IG1heC1oZWlnaHQ6IG5vbmU7IG92ZXJmbG93OiBoaWRkZW47Jw0KICAgICAgICBzY3JvbGxCYXIuZm9yRWFjaChlbGUgPT4gZWxlLnN0eWxlLndpZHRoID0gMCkNCiAgICAgIH0pDQogICAgfSwNCiAgICAvL+WIh+aNoumAiemhuQ0KICAgIGhhbmRsZU5vZGVDbGljayhub2RlKSB7DQogICAgICBpZihub2RlLmNoaWxkcmVuID09IG51bGwgfHwgbm9kZS5jaGlsZHJlbiA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgaWYodGhpcy5tdWx0aXBsZSkgew0KICAgICAgICAgIGxldCBudW0gPSAwDQogICAgICAgICAgdGhpcy52YWx1ZU5hbWUuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgIGl0ZW0gPT0gbm9kZVt0aGlzLnByb3BzLmxhYmVsXSA/IG51bSsrIDogbnVtDQogICAgICAgICAgfSkNCiAgICAgICAgICBpZihudW0gPT0gMCkgew0KICAgICAgICAgICAgdGhpcy52YWx1ZU5hbWUucHVzaChub2RlW3RoaXMucHJvcHMubGFiZWxdKQ0KICAgICAgICAgICAgdGhpcy5yZXN1bHRWYWx1ZS5wdXNoKG5vZGUpDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJHJlZnMuc2VsZWN0VHJlZS5ibHVyKCk7DQogICAgICAgICAgdGhpcy52YWx1ZU5hbWUgPSBub2RlW3RoaXMucHJvcHMubGFiZWxdDQogICAgICAgICAgdGhpcy5yZXN1bHRWYWx1ZSA9IG5vZGUNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLiRlbWl0KCdnZXRWYWx1ZScsIHRoaXMucmVzdWx0VmFsdWUpDQogICAgICB9DQogICAgfSwNCiAgICBjaGFuZ2VWYWx1ZSh2YWwpIHsNCiAgICAgIGlmKHRoaXMubXVsdGlwbGUpIHsNCiAgICAgICAgdGhpcy5yZXN1bHRWYWx1ZS5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgICAgbGV0IGkgPSB2YWwuaW5kZXhPZihpdGVtLm5hbWUpDQogICAgICAgICAgaWYoaSA9PSAtMSkgew0KICAgICAgICAgICAgdGhpcy5yZXN1bHRWYWx1ZS5zcGxpY2UoaW5kZXgsIDEpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLiRlbWl0KCdnZXRWYWx1ZScsIHRoaXMucmVzdWx0VmFsdWUpDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRlbWl0KCdnZXRWYWx1ZScsIHZhbCkNCiAgICAgIH0NCiAgICB9LA0KICAgIC8v5riF5qWa6YCJ5LitDQogICAgY2xlYXJIYW5kbGUoKSB7DQogICAgICB0aGlzLnZhbHVlTmFtZSA9IHRoaXMubXVsdGlwbGUgPyBbXSA6ICcnDQogICAgICB0aGlzLnJlc3VsdFZhbHVlID0gW10NCiAgICAgIHRoaXMuY2xlYXJTZWxlY3RlZCgpDQogICAgICB0aGlzLiRlbWl0KCdnZXRWYWx1ZScsIHRoaXMucmVzdWx0VmFsdWUpDQogICAgfSwNCiAgICAvL+a4heepuumAieS4reagt+W8jw0KICAgIGNsZWFyU2VsZWN0ZWQoKSB7DQogICAgICBsZXQgYWxsTm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyN0cmVlLW9wdGlvbiAuZWwtdHJlZS1ub2RlJykNCiAgICAgIGFsbE5vZGUuZm9yRWFjaChlbGUgPT4gZWxlLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWN1cnJlbnQnKSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/TreeSelect","sourcesContent":["<template>\r\n  <el-select \r\n    ref=\"selectTree\" \r\n    style=\"width: 400px\"\r\n    :value=\"value\" \r\n    v-model=\"valueName\"\r\n    :multiple=\"multiple\" \r\n    :clearable=\"clearable\"\r\n    @clear=\"clearHandle\"\r\n    @change=\"changeValue\">\r\n    <el-option :value=\"valueName\" class=\"options\">\r\n      <el-tree \r\n        id=\"tree-option\"\r\n        ref=\"selectTree\"\r\n        :accordion=\"accordion\"\r\n        :data=\"options\"\r\n        :props=\"props\"\r\n        :node-key=\"props.value\"\r\n        @node-click=\"handleNodeClick\">\r\n        <span slot-scope=\"{ data }\">\r\n          <span>{{ data.name }}{{ data.children ? '(' + data.children.length + ')' : '' }}</span>\r\n        </span>\r\n      </el-tree>\r\n    </el-option>\r\n  </el-select>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TreeSelect',\r\n  props: {\r\n    props: {\r\n      type: Object,\r\n      default: () => {\r\n        return {\r\n          value: 'id',\r\n          label: 'name',\r\n          children: 'children'\r\n        }\r\n      }\r\n    },\r\n    options: {\r\n      type: Array,\r\n      default: () => {\r\n        return []\r\n      }\r\n    },\r\n    value: {\r\n      type: Object,\r\n      default: () => {\r\n        return {}\r\n      }\r\n    },\r\n    valueMultiple: {\r\n      type: Array,\r\n      default: () => {\r\n        return []\r\n      }\r\n    },\r\n    clearable: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    //自动收起\r\n    accordion: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    multiple: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      resultValue: [],\r\n      valueName: this.multiple ? [] : ''\r\n    }\r\n  },\r\n  watch: {\r\n    value() {\r\n      this.resultValue = this.multiple ? this.valueMultiple : this.value\r\n      this.initHandle()\r\n    }\r\n  },\r\n  mounted() {\r\n    this.resultValue = this.multiple ? this.valueMultiple : this.value\r\n    this.initHandle()\r\n  },\r\n  methods: {\r\n    initHandle() {\r\n      if(this.resultValue) {\r\n        if(this.multiple) {\r\n          this.resultValue.forEach(item => this.valueName.push(item.name))\r\n        } else {\r\n          this.valueName = this.resultValue.name\r\n        }\r\n      }\r\n      this.initScroll()\r\n    },\r\n    initScroll() {\r\n      this.$nextTick(() => {\r\n        let scrollWrap = document.querySelectorAll('.el-scrollbar .el-select-dropdown__wrap')[0]\r\n        let scrollBar = document.querySelectorAll('.el-scrollbar .el-scrollbar__bar')\r\n        scrollWrap.style.cssText = 'margin: 0px; max-height: none; overflow: hidden;'\r\n        scrollBar.forEach(ele => ele.style.width = 0)\r\n      })\r\n    },\r\n    //切换选项\r\n    handleNodeClick(node) {\r\n      if(node.children == null || node.children == undefined) {\r\n        if(this.multiple) {\r\n          let num = 0\r\n          this.valueName.forEach(item => {\r\n            item == node[this.props.label] ? num++ : num\r\n          })\r\n          if(num == 0) {\r\n            this.valueName.push(node[this.props.label])\r\n            this.resultValue.push(node)\r\n          }\r\n        } else {\r\n          this.$refs.selectTree.blur();\r\n          this.valueName = node[this.props.label]\r\n          this.resultValue = node\r\n        }\r\n        this.$emit('getValue', this.resultValue)\r\n      }\r\n    },\r\n    changeValue(val) {\r\n      if(this.multiple) {\r\n        this.resultValue.map((item, index) => {\r\n          let i = val.indexOf(item.name)\r\n          if(i == -1) {\r\n            this.resultValue.splice(index, 1)\r\n          }\r\n        })\r\n        this.$emit('getValue', this.resultValue)\r\n      } else {\r\n        this.$emit('getValue', val)\r\n      }\r\n    },\r\n    //清楚选中\r\n    clearHandle() {\r\n      this.valueName = this.multiple ? [] : ''\r\n      this.resultValue = []\r\n      this.clearSelected()\r\n      this.$emit('getValue', this.resultValue)\r\n    },\r\n    //清空选中样式\r\n    clearSelected() {\r\n      let allNode = document.querySelectorAll('#tree-option .el-tree-node')\r\n      allNode.forEach(ele => ele.classList.remove('is-current'))\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-scrollbar .el-scrollbar__view .el-select-dropdown__item {\r\n  height: auto;\r\n  max-height: 300px;\r\n  padding: 0;\r\n  overflow: hidden;\r\n  overflow-y: auto;\r\n}\r\n.el-select-dropdown__item.selected {\r\n  font-weight: normal;\r\n}\r\nul li >>>.el-tree .el-tree-node__content {\r\n  height: auto;\r\n  padding: 0 20px;\r\n}\r\n.el-tree-node__label {\r\n  font-weight: normal;\r\n}\r\n.el-tree >>> .is-current .el-tree-node__label {\r\n  color: #409EFF;\r\n  font-weight: 700;\r\n}\r\n.el-tree >>> .is-current .el-tree-node__childrent .el-tree-node__label {\r\n  color: #606266;\r\n  font-weight: normal;\r\n}\r\n.el-popper {\r\n  z-index: 9999;\r\n}\r\n.ification_col {\r\n  width: 20px;\r\n  height: 10px;\r\n  display: inline-block;\r\n}\r\n</style>"]}]}