{"remainingRequest":"D:\\vue_workspace\\jwsystem\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\jwsystem\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\vue_workspace\\jwsystem\\src\\store\\modules\\user.js","mtime":1679021392928},{"path":"D:\\vue_workspace\\jwsystem\\babel.config.js","mtime":1666484881107},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbG9naW4gfSBmcm9tICcuLi8uLi9hcGkvbG9naW4nOwppbXBvcnQgeyBzZXRVaWQsIHNldFVOYW1lLCBzZXRBdmF0YXIsIGdldFVpZCwgZ2V0VU5hbWUsIGdldEF2YXRhciwgcmVtb3ZlVWlkLCByZW1vdmVVTmFtZSwgcmVtb3ZlQXZhdGFyIH0gZnJvbSAnLi4vLi4vdXRpbHMvYXV0aCc7CmNvbnN0IHVzZXIgPSB7CiAgc3RhdGU6IHsKICAgIHVpZDogZ2V0VWlkKCksCiAgICB1bmFtZTogZ2V0VU5hbWUoKSwKICAgIGxvYWRNZW51czogZmFsc2UsCiAgICBhdmF0YXI6IGdldEF2YXRhcigpCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9VSUQ6IChzdGF0ZSwgdWlkKSA9PiB7CiAgICAgIHNldFVpZCh1aWQpOwogICAgICBzdGF0ZS51aWQgPSBnZXRVaWQoKTsKICAgIH0sCiAgICBTRVRfVU5BTUU6IChzdGF0ZSwgbmFtZSkgPT4gewogICAgICBzZXRVTmFtZShuYW1lKTsKICAgICAgc3RhdGUudW5hbWUgPSBnZXRVTmFtZSgpOwogICAgfSwKICAgIFNFVF9MT0FEX01FTlVTOiAoc3RhdGUsIGxvYWRNZW51cykgPT4gewogICAgICBzdGF0ZS5sb2FkTWVudXMgPSBsb2FkTWVudXM7CiAgICB9LAogICAgU0VUX0FWQVRBUjogKHN0YXRlLCBhdmF0YXIpID0+IHsKICAgICAgc2V0QXZhdGFyKGF2YXRhcik7CiAgICAgIHN0YXRlLmF2YXRhciA9IGdldEF2YXRhcigpOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgTG9naW4oewogICAgICBjb21taXQKICAgIH0sIHVzZXJJbmZvKSB7CiAgICAgIGNvbnN0IHVzZXJuYW1lID0gdXNlckluZm8udXNlcm5hbWU7CiAgICAgIGNvbnN0IHBhc3N3b3JkID0gdXNlckluZm8ucGFzc3dvcmQ7CiAgICAgIGNvbnN0IGNoZWNrY29kZSA9IHVzZXJJbmZvLmNoZWNrY29kZTsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBsb2dpbih1c2VybmFtZSwgcGFzc3dvcmQsIGNoZWNrY29kZSkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICBsZXQgdWlkID0gcmVzLmlkOwogICAgICAgICAgICBsZXQgdW5hbWUgPSByZXMubmFtZTsKICAgICAgICAgICAgbGV0IGF2YXRhciA9IHJlcy5hdmF0YXIgPT09IG51bGwgfHwgcmVzLmF2YXRhciA9PT0gJycgPyByZXF1aXJlKCcuLi8uLi9hc3NldHMvaW1hZ2VzL2F2YXRhci5wbmcnKSA6IHJlcy5hdmF0YXI7CiAgICAgICAgICAgIGNvbW1pdCgnU0VUX1VJRCcsIHVpZCk7CiAgICAgICAgICAgIGNvbW1pdCgnU0VUX1VOQU1FJywgdW5hbWUpOwogICAgICAgICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBhdmF0YXIpOwogICAgICAgICAgICBjb21taXQoJ1NFVF9MT0FEX01FTlVTJywgdHJ1ZSk7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBMb2dvdXQoewogICAgICBjb21taXQsCiAgICAgIHN0YXRlCiAgICB9KSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgcmVtb3ZlVWlkKCk7CiAgICAgICAgcmVtb3ZlVU5hbWUoKTsKICAgICAgICByZW1vdmVBdmF0YXIoKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZUxvYWRNZW51cyh7CiAgICAgIGNvbW1pdAogICAgfSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGNvbW1pdCgnU0VUX0xPQURfTUVOVVMnLCBmYWxzZSk7CiAgICAgIH0pOwogICAgfQogIH0KfTsKZXhwb3J0IGRlZmF1bHQgdXNlcjs="},{"version":3,"names":["login","setUid","setUName","setAvatar","getUid","getUName","getAvatar","removeUid","removeUName","removeAvatar","user","state","uid","uname","loadMenus","avatar","mutations","SET_UID","SET_UNAME","name","SET_LOAD_MENUS","SET_AVATAR","actions","Login","commit","userInfo","username","password","checkcode","Promise","resolve","reject","then","res","id","require","Logout","updateLoadMenus"],"sources":["D:/vue_workspace/jwsystem/src/store/modules/user.js"],"sourcesContent":["import { login } from '../../api/login'\r\n\r\nimport { setUid, setUName, setAvatar, getUid, getUName, getAvatar, removeUid, removeUName, removeAvatar } from '../../utils/auth'\r\n\r\nconst user  = {\r\n  state: {\r\n    uid: getUid(),\r\n    uname: getUName(),\r\n    loadMenus: false,\r\n    avatar: getAvatar()\r\n  },\r\n  mutations: {\r\n    SET_UID: (state, uid) => {\r\n      setUid(uid)\r\n      state.uid = getUid()\r\n    },\r\n    SET_UNAME: (state, name) => {\r\n      setUName(name)\r\n      state.uname = getUName()\r\n    },\r\n    SET_LOAD_MENUS: (state, loadMenus) => {\r\n      state.loadMenus = loadMenus\r\n    },\r\n    SET_AVATAR: (state, avatar) => {\r\n      setAvatar(avatar)\r\n      state.avatar = getAvatar()\r\n    }\r\n  },\r\n  actions: {\r\n    Login({commit}, userInfo) {\r\n      const username = userInfo.username\r\n      const password = userInfo.password\r\n      const checkcode = userInfo.checkcode\r\n      return new Promise((resolve, reject) => {\r\n        login(username, password, checkcode).then(res => {\r\n          if(res) {\r\n            let uid = res.id\r\n            let uname = res.name\r\n            let avatar = (res.avatar === null || res.avatar === '') \r\n              ? require('../../assets/images/avatar.png') : res.avatar\r\n            commit('SET_UID', uid)\r\n            commit('SET_UNAME', uname)\r\n            commit('SET_AVATAR', avatar)\r\n            commit('SET_LOAD_MENUS', true)\r\n            resolve()\r\n          } else {\r\n            reject()\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    Logout({ commit, state }) {\r\n      return new Promise((resolve, reject) => {\r\n        removeUid()\r\n        removeUName()\r\n        removeAvatar()\r\n        resolve()\r\n      })\r\n    },\r\n\r\n    updateLoadMenus({ commit }) {\r\n      return new Promise((resolve, reject) => {\r\n        commit('SET_LOAD_MENUS', false)\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport default user"],"mappings":"AAAA,SAASA,KAAK,QAAQ,iBAAiB;AAEvC,SAASC,MAAM,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,SAAS,EAAEC,WAAW,EAAEC,YAAY,QAAQ,kBAAkB;AAEjI,MAAMC,IAAI,GAAI;EACZC,KAAK,EAAE;IACLC,GAAG,EAAER,MAAM,EAAE;IACbS,KAAK,EAAER,QAAQ,EAAE;IACjBS,SAAS,EAAE,KAAK;IAChBC,MAAM,EAAET,SAAS;EACnB,CAAC;EACDU,SAAS,EAAE;IACTC,OAAO,EAAE,CAACN,KAAK,EAAEC,GAAG,KAAK;MACvBX,MAAM,CAACW,GAAG,CAAC;MACXD,KAAK,CAACC,GAAG,GAAGR,MAAM,EAAE;IACtB,CAAC;IACDc,SAAS,EAAE,CAACP,KAAK,EAAEQ,IAAI,KAAK;MAC1BjB,QAAQ,CAACiB,IAAI,CAAC;MACdR,KAAK,CAACE,KAAK,GAAGR,QAAQ,EAAE;IAC1B,CAAC;IACDe,cAAc,EAAE,CAACT,KAAK,EAAEG,SAAS,KAAK;MACpCH,KAAK,CAACG,SAAS,GAAGA,SAAS;IAC7B,CAAC;IACDO,UAAU,EAAE,CAACV,KAAK,EAAEI,MAAM,KAAK;MAC7BZ,SAAS,CAACY,MAAM,CAAC;MACjBJ,KAAK,CAACI,MAAM,GAAGT,SAAS,EAAE;IAC5B;EACF,CAAC;EACDgB,OAAO,EAAE;IACPC,KAAK,CAAC;MAACC;IAAM,CAAC,EAAEC,QAAQ,EAAE;MACxB,MAAMC,QAAQ,GAAGD,QAAQ,CAACC,QAAQ;MAClC,MAAMC,QAAQ,GAAGF,QAAQ,CAACE,QAAQ;MAClC,MAAMC,SAAS,GAAGH,QAAQ,CAACG,SAAS;MACpC,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtC/B,KAAK,CAAC0B,QAAQ,EAAEC,QAAQ,EAAEC,SAAS,CAAC,CAACI,IAAI,CAACC,GAAG,IAAI;UAC/C,IAAGA,GAAG,EAAE;YACN,IAAIrB,GAAG,GAAGqB,GAAG,CAACC,EAAE;YAChB,IAAIrB,KAAK,GAAGoB,GAAG,CAACd,IAAI;YACpB,IAAIJ,MAAM,GAAIkB,GAAG,CAAClB,MAAM,KAAK,IAAI,IAAIkB,GAAG,CAAClB,MAAM,KAAK,EAAE,GAClDoB,OAAO,CAAC,gCAAgC,CAAC,GAAGF,GAAG,CAAClB,MAAM;YAC1DS,MAAM,CAAC,SAAS,EAAEZ,GAAG,CAAC;YACtBY,MAAM,CAAC,WAAW,EAAEX,KAAK,CAAC;YAC1BW,MAAM,CAAC,YAAY,EAAET,MAAM,CAAC;YAC5BS,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC;YAC9BM,OAAO,EAAE;UACX,CAAC,MAAM;YACLC,MAAM,EAAE;UACV;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IAEDK,MAAM,CAAC;MAAEZ,MAAM;MAAEb;IAAM,CAAC,EAAE;MACxB,OAAO,IAAIkB,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtCxB,SAAS,EAAE;QACXC,WAAW,EAAE;QACbC,YAAY,EAAE;QACdqB,OAAO,EAAE;MACX,CAAC,CAAC;IACJ,CAAC;IAEDO,eAAe,CAAC;MAAEb;IAAO,CAAC,EAAE;MAC1B,OAAO,IAAIK,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtCP,MAAM,CAAC,gBAAgB,EAAE,KAAK,CAAC;MACjC,CAAC,CAAC;IACJ;EACF;AACF,CAAC;AAED,eAAed,IAAI"}]}