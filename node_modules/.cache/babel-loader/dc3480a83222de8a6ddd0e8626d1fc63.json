{"remainingRequest":"D:\\vue_workspace\\filemanage\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\filemanage\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue_workspace\\filemanage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\filemanage\\src\\layout\\components\\TagsView\\ScrollPane\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\filemanage\\src\\layout\\components\\TagsView\\ScrollPane\\index.vue","mtime":1679034238895},{"path":"D:\\vue_workspace\\filemanage\\babel.config.js","mtime":1666484881107},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Y29uc3QgdGFnQW5kVGFnU3BhY2luZyA9IDQ7IC8vIHRhZ0FuZFRhZ1NwYWNpbmcKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2Nyb2xsUGFuZScsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxlZnQ6IDAKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgc2Nyb2xsV3JhcHBlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJlZnMuc2Nyb2xsQ29udGFpbmVyLiRyZWZzLndyYXA7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5zY3JvbGxXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuZW1pdFNjcm9sbCwgdHJ1ZSk7CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy5zY3JvbGxXcmFwcGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuZW1pdFNjcm9sbCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVTY3JvbGwoZSkgewogICAgICBjb25zdCBldmVudERlbHRhID0gZS53aGVlbERlbHRhIHx8IC1lLmRlbHRhWSAqIDQwOwogICAgICBjb25zdCAkc2Nyb2xsV3JhcHBlciA9IHRoaXMuc2Nyb2xsV3JhcHBlcjsKICAgICAgJHNjcm9sbFdyYXBwZXIuc2Nyb2xsTGVmdCA9ICRzY3JvbGxXcmFwcGVyLnNjcm9sbExlZnQgKyBldmVudERlbHRhIC8gNDsKICAgIH0sCiAgICBlbWl0U2Nyb2xsKCkgewogICAgICB0aGlzLiRlbWl0KCdzY3JvbGwnKTsKICAgIH0sCiAgICBtb3ZlVG9UYXJnZXQoY3VycmVudFRhZykgewogICAgICBjb25zdCAkY29udGFpbmVyID0gdGhpcy4kcmVmcy5zY3JvbGxDb250YWluZXIuJGVsOwogICAgICBjb25zdCAkY29udGFpbmVyV2lkdGggPSAkY29udGFpbmVyLm9mZnNldFdpZHRoOwogICAgICBjb25zdCAkc2Nyb2xsV3JhcHBlciA9IHRoaXMuc2Nyb2xsV3JhcHBlcjsKICAgICAgY29uc3QgdGFnTGlzdCA9IHRoaXMuJHBhcmVudC4kcmVmcy50YWc7CiAgICAgIGxldCBmaXJzdFRhZyA9IG51bGw7CiAgICAgIGxldCBsYXN0VGFnID0gbnVsbDsKCiAgICAgIC8vIGZpbmQgZmlyc3QgdGFnIGFuZCBsYXN0IHRhZwogICAgICBpZiAodGFnTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgZmlyc3RUYWcgPSB0YWdMaXN0WzBdOwogICAgICAgIGxhc3RUYWcgPSB0YWdMaXN0W3RhZ0xpc3QubGVuZ3RoIC0gMV07CiAgICAgIH0KICAgICAgaWYgKGZpcnN0VGFnID09PSBjdXJyZW50VGFnKSB7CiAgICAgICAgJHNjcm9sbFdyYXBwZXIuc2Nyb2xsTGVmdCA9IDA7CiAgICAgIH0gZWxzZSBpZiAobGFzdFRhZyA9PT0gY3VycmVudFRhZykgewogICAgICAgICRzY3JvbGxXcmFwcGVyLnNjcm9sbExlZnQgPSAkc2Nyb2xsV3JhcHBlci5zY3JvbGxXaWR0aCAtICRjb250YWluZXJXaWR0aDsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBmaW5kIHByZVRhZyBhbmQgbmV4dFRhZwogICAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IHRhZ0xpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbSA9PT0gY3VycmVudFRhZyk7CiAgICAgICAgY29uc3QgcHJldlRhZyA9IHRhZ0xpc3RbY3VycmVudEluZGV4IC0gMV07CiAgICAgICAgY29uc3QgbmV4dFRhZyA9IHRhZ0xpc3RbY3VycmVudEluZGV4ICsgMV07CgogICAgICAgIC8vIHRoZSB0YWcncyBvZmZzZXRMZWZ0IGFmdGVyIG9mIG5leHRUYWcKICAgICAgICBjb25zdCBhZnRlck5leHRUYWdPZmZzZXRMZWZ0ID0gbmV4dFRhZy4kZWwub2Zmc2V0TGVmdCArIG5leHRUYWcuJGVsLm9mZnNldFdpZHRoICsgdGFnQW5kVGFnU3BhY2luZzsKCiAgICAgICAgLy8gdGhlIHRhZydzIG9mZnNldExlZnQgYmVmb3JlIG9mIHByZXZUYWcKICAgICAgICBjb25zdCBiZWZvcmVQcmV2VGFnT2Zmc2V0TGVmdCA9IHByZXZUYWcuJGVsLm9mZnNldExlZnQgLSB0YWdBbmRUYWdTcGFjaW5nOwogICAgICAgIGlmIChhZnRlck5leHRUYWdPZmZzZXRMZWZ0ID4gJHNjcm9sbFdyYXBwZXIuc2Nyb2xsTGVmdCArICRjb250YWluZXJXaWR0aCkgewogICAgICAgICAgJHNjcm9sbFdyYXBwZXIuc2Nyb2xsTGVmdCA9IGFmdGVyTmV4dFRhZ09mZnNldExlZnQgLSAkY29udGFpbmVyV2lkdGg7CiAgICAgICAgfSBlbHNlIGlmIChiZWZvcmVQcmV2VGFnT2Zmc2V0TGVmdCA8ICRzY3JvbGxXcmFwcGVyLnNjcm9sbExlZnQpIHsKICAgICAgICAgICRzY3JvbGxXcmFwcGVyLnNjcm9sbExlZnQgPSBiZWZvcmVQcmV2VGFnT2Zmc2V0TGVmdDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"mappings":"AAOA;;AAEA;EACAA;EACAC;IACA;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA;MACA;MACAC;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MAEA;MACA;;MAEA;MACA;QACAC;QACAC;MACA;MAEA;QACAJ;MACA;QACAA;MACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QAEA;UACAA;QACA;UACAA;QACA;MACA;IACA;EACA;AACA","names":["name","data","left","computed","scrollWrapper","mounted","beforeDestroy","methods","handleScroll","$scrollWrapper","emitScroll","moveToTarget","firstTag","lastTag"],"sourceRoot":"src/layout/components/TagsView/ScrollPane","sources":["index.vue"],"sourcesContent":["<template>\r\n  <el-scrollbar ref=\"scrollContainer\" :vertical=\"false\" class=\"scroll-container\" @wheel.native.prevent=\"handleScroll\">\r\n    <slot />\r\n  </el-scrollbar>\r\n</template>\r\n\r\n<script>\r\nconst tagAndTagSpacing = 4 // tagAndTagSpacing\r\n\r\nexport default {\r\n  name: 'ScrollPane',\r\n  data() {\r\n    return {\r\n      left: 0\r\n    }\r\n  },\r\n  computed: {\r\n    scrollWrapper() {\r\n      return this.$refs.scrollContainer.$refs.wrap\r\n    }\r\n  },\r\n  mounted() {\r\n    this.scrollWrapper.addEventListener('scroll', this.emitScroll, true)\r\n  },\r\n  beforeDestroy() {\r\n    this.scrollWrapper.removeEventListener('scroll', this.emitScroll)\r\n  },\r\n  methods: {\r\n    handleScroll(e) {\r\n      const eventDelta = e.wheelDelta || -e.deltaY * 40\r\n      const $scrollWrapper = this.scrollWrapper\r\n      $scrollWrapper.scrollLeft = $scrollWrapper.scrollLeft + eventDelta / 4\r\n    },\r\n    emitScroll() {\r\n      this.$emit('scroll')\r\n    },\r\n    moveToTarget(currentTag) {\r\n      const $container = this.$refs.scrollContainer.$el\r\n      const $containerWidth = $container.offsetWidth\r\n      const $scrollWrapper = this.scrollWrapper\r\n      const tagList = this.$parent.$refs.tag\r\n\r\n      let firstTag = null\r\n      let lastTag = null\r\n\r\n      // find first tag and last tag\r\n      if (tagList.length > 0) {\r\n        firstTag = tagList[0]\r\n        lastTag = tagList[tagList.length - 1]\r\n      }\r\n\r\n      if (firstTag === currentTag) {\r\n        $scrollWrapper.scrollLeft = 0\r\n      } else if (lastTag === currentTag) {\r\n        $scrollWrapper.scrollLeft = $scrollWrapper.scrollWidth - $containerWidth\r\n      } else {\r\n        // find preTag and nextTag\r\n        const currentIndex = tagList.findIndex(item => item === currentTag)\r\n        const prevTag = tagList[currentIndex - 1]\r\n        const nextTag = tagList[currentIndex + 1]\r\n\r\n        // the tag's offsetLeft after of nextTag\r\n        const afterNextTagOffsetLeft = nextTag.$el.offsetLeft + nextTag.$el.offsetWidth + tagAndTagSpacing\r\n\r\n        // the tag's offsetLeft before of prevTag\r\n        const beforePrevTagOffsetLeft = prevTag.$el.offsetLeft - tagAndTagSpacing\r\n\r\n        if (afterNextTagOffsetLeft > $scrollWrapper.scrollLeft + $containerWidth) {\r\n          $scrollWrapper.scrollLeft = afterNextTagOffsetLeft - $containerWidth\r\n        } else if (beforePrevTagOffsetLeft < $scrollWrapper.scrollLeft) {\r\n          $scrollWrapper.scrollLeft = beforePrevTagOffsetLeft\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.scroll-container {\r\n  white-space: nowrap;\r\n  position: relative;\r\n  overflow: hidden;\r\n  width: 100%;\r\n  ::v-deep {\r\n    .el-scrollbar__bar {\r\n      bottom: 0px;\r\n    }\r\n    .el-scrollbar__wrap {\r\n      height: 49px;\r\n    }\r\n  }\r\n}\r\n\r\n</style>"]}]}