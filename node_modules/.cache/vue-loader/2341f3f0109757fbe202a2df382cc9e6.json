{"remainingRequest":"D:\\vue_workspace\\filemanage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\filemanage\\src\\components\\TreeSelect\\index.vue?vue&type=style&index=0&id=3b6dbb26&scoped=true&lang=css&","dependencies":[{"path":"D:\\vue_workspace\\filemanage\\src\\components\\TreeSelect\\index.vue","mtime":1672716154206},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1655715156000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouZWwtc2Nyb2xsYmFyIC5lbC1zY3JvbGxiYXJfX3ZpZXcgLmVsLXNlbGVjdC1kcm9wZG93bl9faXRlbSB7DQogIGhlaWdodDogYXV0bzsNCiAgbWF4LWhlaWdodDogMzAwcHg7DQogIHBhZGRpbmc6IDA7DQogIG92ZXJmbG93OiBoaWRkZW47DQogIG92ZXJmbG93LXk6IGF1dG87DQp9DQouZWwtc2VsZWN0LWRyb3Bkb3duX19pdGVtLnNlbGVjdGVkIHsNCiAgZm9udC13ZWlnaHQ6IG5vcm1hbDsNCn0NCnVsIGxpID4+Pi5lbC10cmVlIC5lbC10cmVlLW5vZGVfX2NvbnRlbnQgew0KICBoZWlnaHQ6IGF1dG87DQogIHBhZGRpbmc6IDAgMjBweDsNCn0NCi5lbC10cmVlLW5vZGVfX2xhYmVsIHsNCiAgZm9udC13ZWlnaHQ6IG5vcm1hbDsNCn0NCi5lbC10cmVlID4+PiAuaXMtY3VycmVudCAuZWwtdHJlZS1ub2RlX19sYWJlbCB7DQogIGNvbG9yOiAjNDA5RUZGOw0KICBmb250LXdlaWdodDogNzAwOw0KfQ0KLmVsLXRyZWUgPj4+IC5pcy1jdXJyZW50IC5lbC10cmVlLW5vZGVfX2NoaWxkcmVudCAuZWwtdHJlZS1ub2RlX19sYWJlbCB7DQogIGNvbG9yOiAjNjA2MjY2Ow0KICBmb250LXdlaWdodDogbm9ybWFsOw0KfQ0KLmVsLXBvcHBlciB7DQogIHotaW5kZXg6IDk5OTk7DQp9DQouaWZpY2F0aW9uX2NvbCB7DQogIHdpZHRoOiAyMHB4Ow0KICBoZWlnaHQ6IDEwcHg7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA8JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/TreeSelect","sourcesContent":["<template>\r\n  <el-select \r\n    ref=\"selectTree\" \r\n    style=\"width: 400px\"\r\n    :value=\"value\" \r\n    v-model=\"valueName\"\r\n    :multiple=\"multiple\" \r\n    :clearable=\"clearable\"\r\n    @clear=\"clearHandle\"\r\n    @change=\"changeValue\">\r\n    <el-option :value=\"valueName\" class=\"options\">\r\n      <el-tree \r\n        id=\"tree-option\"\r\n        ref=\"selectTree\"\r\n        :accordion=\"accordion\"\r\n        :data=\"options\"\r\n        :props=\"props\"\r\n        :node-key=\"props.value\"\r\n        @node-click=\"handleNodeClick\">\r\n        <span slot-scope=\"{ data }\">\r\n          <span>{{ data.name }}{{ data.children ? '(' + data.children.length + ')' : '' }}</span>\r\n        </span>\r\n      </el-tree>\r\n    </el-option>\r\n  </el-select>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TreeSelect',\r\n  props: {\r\n    props: {\r\n      type: Object,\r\n      default: () => {\r\n        return {\r\n          value: 'id',\r\n          label: 'name',\r\n          children: 'children'\r\n        }\r\n      }\r\n    },\r\n    options: {\r\n      type: Array,\r\n      default: () => {\r\n        return []\r\n      }\r\n    },\r\n    value: {\r\n      type: Object,\r\n      default: () => {\r\n        return {}\r\n      }\r\n    },\r\n    valueMultiple: {\r\n      type: Array,\r\n      default: () => {\r\n        return []\r\n      }\r\n    },\r\n    clearable: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    //自动收起\r\n    accordion: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    multiple: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      resultValue: [],\r\n      valueName: this.multiple ? [] : ''\r\n    }\r\n  },\r\n  watch: {\r\n    value() {\r\n      this.resultValue = this.multiple ? this.valueMultiple : this.value\r\n      this.initHandle()\r\n    }\r\n  },\r\n  mounted() {\r\n    this.resultValue = this.multiple ? this.valueMultiple : this.value\r\n    this.initHandle()\r\n  },\r\n  methods: {\r\n    initHandle() {\r\n      if(this.resultValue) {\r\n        if(this.multiple) {\r\n          this.resultValue.forEach(item => this.valueName.push(item.name))\r\n        } else {\r\n          this.valueName = this.resultValue.name\r\n        }\r\n      }\r\n      this.initScroll()\r\n    },\r\n    initScroll() {\r\n      this.$nextTick(() => {\r\n        let scrollWrap = document.querySelectorAll('.el-scrollbar .el-select-dropdown__wrap')[0]\r\n        let scrollBar = document.querySelectorAll('.el-scrollbar .el-scrollbar__bar')\r\n        scrollWrap.style.cssText = 'margin: 0px; max-height: none; overflow: hidden;'\r\n        scrollBar.forEach(ele => ele.style.width = 0)\r\n      })\r\n    },\r\n    //切换选项\r\n    handleNodeClick(node) {\r\n      if(node.children == null || node.children == undefined) {\r\n        if(this.multiple) {\r\n          let num = 0\r\n          this.valueName.forEach(item => {\r\n            item == node[this.props.label] ? num++ : num\r\n          })\r\n          if(num == 0) {\r\n            this.valueName.push(node[this.props.label])\r\n            this.resultValue.push(node)\r\n          }\r\n        } else {\r\n          this.$refs.selectTree.blur();\r\n          this.valueName = node[this.props.label]\r\n          this.resultValue = node\r\n        }\r\n        this.$emit('getValue', this.resultValue)\r\n      }\r\n    },\r\n    changeValue(val) {\r\n      if(this.multiple) {\r\n        this.resultValue.map((item, index) => {\r\n          let i = val.indexOf(item.name)\r\n          if(i == -1) {\r\n            this.resultValue.splice(index, 1)\r\n          }\r\n        })\r\n        this.$emit('getValue', this.resultValue)\r\n      } else {\r\n        this.$emit('getValue', val)\r\n      }\r\n    },\r\n    //清楚选中\r\n    clearHandle() {\r\n      this.valueName = this.multiple ? [] : ''\r\n      this.resultValue = []\r\n      this.clearSelected()\r\n      this.$emit('getValue', this.resultValue)\r\n    },\r\n    //清空选中样式\r\n    clearSelected() {\r\n      let allNode = document.querySelectorAll('#tree-option .el-tree-node')\r\n      allNode.forEach(ele => ele.classList.remove('is-current'))\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-scrollbar .el-scrollbar__view .el-select-dropdown__item {\r\n  height: auto;\r\n  max-height: 300px;\r\n  padding: 0;\r\n  overflow: hidden;\r\n  overflow-y: auto;\r\n}\r\n.el-select-dropdown__item.selected {\r\n  font-weight: normal;\r\n}\r\nul li >>>.el-tree .el-tree-node__content {\r\n  height: auto;\r\n  padding: 0 20px;\r\n}\r\n.el-tree-node__label {\r\n  font-weight: normal;\r\n}\r\n.el-tree >>> .is-current .el-tree-node__label {\r\n  color: #409EFF;\r\n  font-weight: 700;\r\n}\r\n.el-tree >>> .is-current .el-tree-node__childrent .el-tree-node__label {\r\n  color: #606266;\r\n  font-weight: normal;\r\n}\r\n.el-popper {\r\n  z-index: 9999;\r\n}\r\n.ification_col {\r\n  width: 20px;\r\n  height: 10px;\r\n  display: inline-block;\r\n}\r\n</style>"]}]}