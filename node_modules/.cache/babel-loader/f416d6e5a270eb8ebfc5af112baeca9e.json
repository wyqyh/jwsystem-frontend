{"remainingRequest":"D:\\vue_workspace\\jwsystem\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue_workspace\\jwsystem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\jwsystem\\src\\views\\course\\courselist.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\jwsystem\\src\\views\\course\\courselist.vue","mtime":1679573171726},{"path":"D:\\vue_workspace\\jwsystem\\babel.config.js","mtime":1666484881107},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IGdldFR5cGVEYXRhQnlUeXBlbm9zIH0gZnJvbSAiLi4vLi4vYXBpL2Jhc2ljZGF0YS90eXBlIjsKaW1wb3J0IHsgZ2V0Q2xhc3NubyB9IGZyb20gIi4uLy4uL2FwaS9iYXNpY2RhdGEvY2xhc3MiOwppbXBvcnQgVHJlZVNlbGVjdCBmcm9tICdAcmlvcGhhZS92dWUtdHJlZXNlbGVjdCc7CmltcG9ydCAnQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QvZGlzdC92dWUtdHJlZXNlbGVjdC5jc3MnOwppbXBvcnQgeyBsaXN0Q291cnNlLCBnZXRDb3Vyc2VuYW1lIH0gZnJvbSAiLi4vLi4vYXBpL2NvdXJzZS9jb3Vyc2UiOwppbXBvcnQgQWRkQ291cnNlIGZyb20gIi4vYWRkLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ291cnNlTGlzdCIsCiAgY29tcG9uZW50czogewogICAgVHJlZVNlbGVjdCwKICAgIEFkZENvdXJzZQogIH0sCiAgcHJvcHM6IHsKICAgIHNlbGVjdGVkY2xzaWRzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNsYXNzbm9zOiBbXSwKICAgICAgdGVybXM6IFtdLAogICAgICBtYWpvcnM6IFtdLAogICAgICB0cmFpbmxldmVsczogW10sCiAgICAgIHRhc2t0eXBlczogW10sCiAgICAgIHByYWN0aWNldHlwZXM6IFtdLAogICAgICBjb3Vyc2VuYW1lczogW10sCiAgICAgIHF1ZXJ5UGFyYW1zOiB7CiAgICAgICAgY2xhc3Nub3M6IFtdLAogICAgICAgIHRlcm1pZHM6IFtdLAogICAgICAgIG1ham9yaWRzOiBbXSwKICAgICAgICB0cmFpbmxldmVsaWRzOiBbXSwKICAgICAgICB0YXNrdHlwZWlkczogW10sCiAgICAgICAgcHJhY3RpY2V0eXBlczogW10sCiAgICAgICAgY291cnNlbmFtZXM6IFtdLAogICAgICAgIHBhZ2VudW06IDEsCiAgICAgICAgcGFnZXNpemU6IDE1CiAgICAgIH0sCiAgICAgIGNvdXJzZXM6IFtdLAogICAgICB0b3RhbDogMCwKICAgICAgc2VsZWN0ZWRJZHM6IFtdLAogICAgICBzaW5nbGVDbGFzczogZmFsc2UsCiAgICAgIGNsYXNzaWQ6IDAKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgZ2V0Q2xhc3NubygpLnRoZW4ocmVzID0+IHsKICAgICAgdGhpcy5jbGFzc25vcyA9IHJlczsKICAgIH0pLCBnZXRUeXBlRGF0YUJ5VHlwZW5vcyhbJzEwMDEnLCAnMTAwMicsICcxMDA2JywgJzEwMTAnLCAnMTAxMSddKS50aGVuKHJlcyA9PiB7CiAgICAgIGxldCByZXN1bHQgPSBldmFsKHJlcyk7CiAgICAgIHRoaXMudHJhaW5sZXZlbHMgPSByZXN1bHRbJzEwMDEnXTsKICAgICAgdGhpcy50YXNrdHlwZXMgPSByZXN1bHRbJzEwMDInXTsKICAgICAgdGhpcy5tYWpvcnMgPSByZXN1bHRbJzEwMTAnXTsKICAgICAgdGhpcy50ZXJtcyA9IHJlc3VsdFsnMTAxMSddOwogICAgICB0aGlzLnByYWN0aWNldHlwZXMgPSByZXN1bHRbJzEwMDYnXTsKICAgIH0pLCBnZXRDb3Vyc2VuYW1lKCkudGhlbihyZXMgPT4gewogICAgICB0aGlzLmNvdXJzZW5hbWVzID0gcmVzOwogICAgfSk7CiAgICB0aGlzLmxvYWRDb3Vyc2UoKTsKICB9LAogIHdhdGNoOiB7CiAgICBzZWxlY3RlZGNsc2lkcygpIHsKICAgICAgdGhpcy5zaW5nbGVDbGFzcyA9IHRoaXMuc2VsZWN0ZWRjbHNpZHMgJiYgdGhpcy5zZWxlY3RlZGNsc2lkcy5sZW5ndGggPT0gMTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFRyZWUodHJlZSA9IFtdKSB7CiAgICAgIGxldCBhcnIgPSBbXTsKICAgICAgaWYgKHRyZWUubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgdHJlZS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgbGV0IG9iaiA9IHt9OwogICAgICAgICAgb2JqLmxhYmVsID0gaXRlbS5uYW1lOwogICAgICAgICAgb2JqLmlkID0gaXRlbS5pZDsKICAgICAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7CiAgICAgICAgICAgIG9iai5jaGlsZHJlbiA9IHRoaXMuZ2V0VHJlZShpdGVtLmNoaWxkcmVuKTsKICAgICAgICAgIH0KICAgICAgICAgIGFyci5wdXNoKG9iaik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGFycjsKICAgIH0sCiAgICByZXNldFF1ZXJ5KCkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW1zID0gewogICAgICAgICdwYWdlbnVtJzogMSwKICAgICAgICAncGFnZXNpemUnOiAxMAogICAgICB9OwogICAgfSwKICAgIGxvYWRDb3Vyc2UoKSB7CiAgICAgIGxpc3RDb3Vyc2UodGhpcy5xdWVyeVBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuY291cnNlcyA9IHJlcy5saXN0OwogICAgICAgIHRoaXMudG90YWwgPSByZXMudG90YWw7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5zZWxlY3RlZElkcyA9IHZhbC5tYXAoaXRlbSA9PiBpdGVtLmlkKTsKICAgIH0sCiAgICB2aWV3U3R1ZGVudChyb3cpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvY2xhc3Mvc3R1ZGVudCcsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIGNsYXNzaW5mbzogcm93CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhZGRDb3Vyc2UoKSB7CiAgICAgIGlmICh0aGlzLnNpbmdsZUNsYXNzKSB7CiAgICAgICAgdGhpcy5jbGFzc2lkID0gdGhpcy5zZWxlY3RlZGNsc2lkc1swXTsKICAgICAgICB0aGlzLiRyZWZzLmFkZENvdXJzZVJlZi5vcGVuRGlhbG9nKHRoaXMuY2xhc3NpZCk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRDb3Vyc2VTY2hlZHVsZShyb3cpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvY291cnNlL2RldGFpbC9hZGQnLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBjb3Vyc2VpbmZvOiByb3cKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVVwZGF0ZShyb3cpIHt9LAogICAgaGFuZGxlRGVsZXRlKHJvdykge30KICB9Cn07"},{"version":3,"mappings":";AA6JA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA;EACAC;IACAC;IACAC;EACA;EACAC;IACAC;MACAC;MACAC;QACA;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAP;QACAQ;QACAC;QACAC;QACAC;QACAN;QACAC;QACAM;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA,IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA,IACAC;MACA;IACA;IACA;EACA;EACAC;IACA3B;MACA;IACA;EACA;EACA4B;IACAC;MACA;MACA;QACAC;UACA;UACAC;UACAA;UACA;YACAA;UACA;UACAC;QACA;MACA;MACA;IACA;IACAC;MACA;QAAA;QAAA;MAAA;IACA;IACAC;MACAC;QACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QAAAC;QAAAC;UAAAC;QAAA;MAAA;IACA;IACAC;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;QAAAJ;QAAAC;UAAAI;QAAA;MAAA;IACA;IACAC,mBAEA;IACAC,mBAEA;EACA;AACA","names":["name","components","TreeSelect","AddCourse","props","selectedclsids","type","default","data","classnos","terms","majors","trainlevels","tasktypes","practicetypes","coursenames","queryParams","termids","majorids","trainlevelids","tasktypeids","pagenum","pagesize","courses","total","selectedIds","singleClass","classid","created","getClassno","getTypeDataByTypenos","getCoursename","watch","methods","getTree","tree","obj","arr","resetQuery","loadCourse","listCourse","handleSelectionChange","viewStudent","path","query","classinfo","addCourse","addCourseSchedule","courseinfo","handleUpdate","handleDelete"],"sourceRoot":"src/views/course","sources":["courselist.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form :inline=\"true\" ref=\"queryForm\" :model=\"queryParams\">\r\n      <el-form-item label=\"期班号\" prop=\"classnos\">\r\n        <el-select v-model=\"queryParams.classnos\" multiple placeholder=\"请选择\" clearable size=\"medium\">\r\n          <el-option v-for=\"item in classnos\" :key=\"item\" :label=\"item\" :value=\"item\" />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"开课学期\" prop=\"terms\">\r\n       <el-select v-model=\"queryParams.termids\" multiple placeholder=\"请选择\" clearable size=\"medium\">\r\n          <el-option\r\n            v-for=\"item in terms\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"课程名称\" prop=\"coursenames\">\r\n       <el-select v-model=\"queryParams.coursenames\" multiple placeholder=\"请选择\" clearable size=\"medium\">\r\n          <el-option\r\n            v-for=\"item in coursenames\"\r\n            :key=\"item.id\"\r\n            :label=\"item.coursename\"\r\n            :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"专业名称\" prop=\"majors\">\r\n        <el-select v-model=\"queryParams.majorids\" multiple placeholder=\"请选择\" clearable size=\"medium\">\r\n          <el-option\r\n            v-for=\"item in majors\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"培训层次\" prop=\"trainlevels\">\r\n       <el-select v-model=\"queryParams.trainlevels\" multiple placeholder=\"请选择\" clearable size=\"medium\">\r\n          <el-option\r\n            v-for=\"item in trainlevels\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"任务类别\" prop=\"tasktypes\">\r\n        <el-select v-model=\"queryParams.tasktypeids\" multiple placeholder=\"请选择\" clearable size=\"medium\">\r\n          <el-option\r\n            v-for=\"item in tasktypes\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"实践类别\" prop=\"practicetypes\">\r\n        <el-select v-model=\"queryParams.practicetypes\" multiple placeholder=\"请选择\" clearable size=\"medium\">\r\n          <el-option\r\n            v-for=\"item in practicetypes\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button \r\n          type=\"primary\" \r\n          size=\"mini\" \r\n          icon=\"el-icon-search\"\r\n          @click=\"loadCourse\">搜索</el-button>\r\n        <el-button \r\n          icon=\"el-icon-refresh\"\r\n          size=\"mini\"\r\n          @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <el-row :gutter=\"10\">\r\n      <el-col :span=\"1.5\">\r\n        <el-button \r\n          type=\"primary\" \r\n          size=\"mini\" \r\n          icon=\"el-icon-circle-plus-outline\"\r\n          plain\r\n          :disabled=\"!singleClass\"\r\n          @click=\"addCourse\">添加课程</el-button>\r\n      </el-col>\r\n    </el-row>\r\n    <el-table :data=\"courses\" row-key=\"id\" ref=\"courseTable\" @selection-change=\"handleSelectionChange\">\r\n      <el-table-column type=\"selection\" width=\"55px\" align=\"center\"></el-table-column>\r\n      <el-table-column label=\"期班号\" prop=\"classno\" width=\"100px\"></el-table-column>\r\n      <el-table-column label=\"开课学期\" prop=\"term\" width=\"100px\"></el-table-column>\r\n      <el-table-column label=\"培训层次\" prop=\"trainlevel\" width=\"100px\"></el-table-column>\r\n      <el-table-column label=\"课程名称\" prop=\"coursename\" width=\"100px\"></el-table-column>\r\n      <el-table-column label=\"培训专业\" prop=\"majorname\" width=\"100px\"></el-table-column>\r\n      <el-table-column label=\"学员人数\" prop=\"stunum\" width=\"80px\"></el-table-column>\r\n      <el-table-column label=\"任课教员\" prop=\"teachername\" width=\"100px\"></el-table-column>\r\n      <el-table-column label=\"任务类别\" prop=\"tasktype\" width=\"100px\"></el-table-column>\r\n      <el-table-column label=\"实践类别\" prop=\"practicetype\" width=\"100px\"></el-table-column>\r\n      <el-table-column label=\"理论学时\" prop=\"theroyhour\" width=\"100px\"></el-table-column>\r\n      <el-table-column label=\"实践学时\" prop=\"practicehour\" width=\"100px\"></el-table-column>\r\n      <el-table-column label=\"主/辅讲\" prop=\"prime\" width=\"100px\"></el-table-column>\r\n      <el-table-column label=\"批次系数\" prop=\"batchcoeff\" width=\"100px\"></el-table-column>\r\n      <el-table-column label=\"创建时间\" prop=\"createTime\" width=\"100px\"></el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-edit\"\r\n            @click=\"handleUpdate(scope.row)\">\r\n            修改\r\n          </el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"success\"\r\n            @click=\"viewStudent(scope.row)\"\r\n            icon=\"el-icon-view\">\r\n            查看学员\r\n          </el-button>\r\n          <el-button\r\n            type=\"warning\" \r\n            size=\"mini\" \r\n            icon=\"el-icon-circle-plus-outline\"\r\n            plain \r\n            class=\"detailcourse\"\r\n            @click=\"addCourseSchedule(scope.row)\">\r\n            添加细化课表\r\n          </el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"danger\"\r\n            @click=\"handleDelete(scope.row)\"\r\n            icon=\"el-icon-delete\">\r\n            删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <pagination\r\n      :total=\"total\"\r\n      :pageSizes=\"[10, 20, 30, 50]\"\r\n      :page.sync=\"queryParams.pagenum\"\r\n      :limit.sync=\"queryParams.pagesize\"\r\n      @pagination=\"loadCourse\"></pagination>\r\n\r\n    <add-course ref=\"addCourseRef\" :practicetypes=\"practicetypes\" :classid=\"classid\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { getTypeDataByTypenos } from \"../../api/basicdata/type\"\r\nimport { getClassno } from \"../../api/basicdata/class\" \r\nimport TreeSelect from '@riophae/vue-treeselect'\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\r\nimport { listCourse, getCoursename } from \"../../api/course/course\"\r\nimport AddCourse from \"./add.vue\"\r\n\r\nexport default {\r\n  name: \"CourseList\",\r\n  components: {\r\n    TreeSelect,\r\n    AddCourse\r\n  },\r\n  props: {\r\n    selectedclsids: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      classnos: [],\r\n      terms: [],\r\n      majors: [],\r\n      trainlevels: [],\r\n      tasktypes: [],\r\n      practicetypes: [],\r\n      coursenames: [],\r\n      queryParams: {\r\n        classnos: [],\r\n        termids: [],\r\n        majorids: [],\r\n        trainlevelids: [],\r\n        tasktypeids: [],\r\n        practicetypes: [],\r\n        coursenames: [],\r\n        pagenum: 1,\r\n        pagesize: 15\r\n      },\r\n      courses: [],\r\n      total: 0,\r\n      selectedIds: [],\r\n      singleClass: false,\r\n      classid: 0\r\n    }\r\n  },\r\n  created() {\r\n    getClassno().then(res => {\r\n      this.classnos = res\r\n    }),\r\n    getTypeDataByTypenos(['1001', '1002', '1006', '1010', '1011']).then(res => {\r\n      let result = eval(res)\r\n      this.trainlevels = result['1001']\r\n      this.tasktypes = result['1002']\r\n      this.majors = result['1010']\r\n      this.terms = result['1011']\r\n      this.practicetypes = result['1006']\r\n    }),\r\n    getCoursename().then(res => {\r\n      this.coursenames = res\r\n    })\r\n    this.loadCourse()\r\n  },\r\n  watch: {\r\n    selectedclsids() {\r\n      this.singleClass = (this.selectedclsids && this.selectedclsids.length == 1)\r\n    }\r\n  },\r\n  methods: {\r\n    getTree(tree = []) {\r\n      let arr = [];\r\n      if(tree.length !== 0) {\r\n        tree.forEach(item => {\r\n          let obj = {}\r\n          obj.label = item.name\r\n          obj.id = item.id\r\n          if(item.children) {\r\n            obj.children = this.getTree(item.children)\r\n          }\r\n          arr.push(obj)\r\n        })\r\n      }\r\n      return arr\r\n    },\r\n    resetQuery() {\r\n      this.queryParams = { 'pagenum': 1, 'pagesize': 10 }\r\n    },\r\n    loadCourse() {\r\n      listCourse(this.queryParams).then(res => {\r\n        this.courses = res.list\r\n        this.total = res.total\r\n      })\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.selectedIds = val.map(item => item.id)\r\n    },\r\n    viewStudent(row) {\r\n      this.$router.push({ path: '/class/student', query: {classinfo: row} })\r\n    },\r\n    addCourse() {\r\n      if(this.singleClass) {\r\n        this.classid = this.selectedclsids[0]\r\n        this.$refs.addCourseRef.openDialog(this.classid)\r\n      }\r\n    },\r\n    addCourseSchedule(row) {\r\n      this.$router.push({ path: '/course/detail/add', query: {courseinfo: row} })\r\n    },\r\n    handleUpdate(row) {\r\n      \r\n    },\r\n    handleDelete(row) {\r\n      \r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n//显示时按钮样式\r\n.detailcourse { //需要更改的按钮类型\r\n  color: #754d26 !important;\r\n  background: #ecbd87 !important;\r\n  border-color: #ecbd87 !important;\r\n}\r\n//移入时按钮样式\r\n.detailcourse:hover {\r\n  background: #f78401 !important;\r\n  border-color: #f78401 !important;\r\n  color: #FFF !important;\r\n}\r\n</style>"]}]}