{"remainingRequest":"D:\\vue_workspace\\jwsystem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\jwsystem\\src\\views\\basicdata\\class\\addclass.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\jwsystem\\src\\views\\basicdata\\class\\addclass.vue","mtime":1679400959756},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\jwsystem\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoNCmltcG9ydCBUcmVlU2VsZWN0IGZyb20gJ0ByaW9waGFlL3Z1ZS10cmVlc2VsZWN0Jw0KaW1wb3J0ICdAcmlvcGhhZS92dWUtdHJlZXNlbGVjdC9kaXN0L3Z1ZS10cmVlc2VsZWN0LmNzcycNCmltcG9ydCB7IGFkZENsYXNzLCB1cGRhdGVDbGFzcyB9IGZyb20gJy4uLy4uLy4uL2FwaS9iYXNpY2RhdGEvY2xhc3MnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0FkZENsYXNzJywNCiAgY29tcG9uZW50czogew0KICAgIFRyZWVTZWxlY3QNCiAgfSwNCiAgcHJvcHM6IHsNCiAgICBjbGFzc25vczogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gW10NCiAgICAgIH0NCiAgICB9LA0KICAgIHRlcm1zOiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiBbXQ0KICAgICAgfQ0KICAgIH0sDQogICAgZGVwdHM6IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIFtdDQogICAgICB9DQogICAgfSwNCiAgICBtYWpvcnM6IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIFtdDQogICAgICB9DQogICAgfSwNCiAgICB0cmFpbmxldmVsczogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gW10NCiAgICAgIH0NCiAgICB9LA0KICAgIHRhc2t0eXBlczogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gW10NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRpdGxlOiAn5re75Yqg5pyf54+tJywNCiAgICAgIG9wZW46IGZhbHNlLA0KICAgICAgY2xhc3NpbmZvOiB7DQogICAgICAgIGlkOiB1bmRlZmluZWQsDQogICAgICAgIGNsYXNzbm86IHVuZGVmaW5lZCwNCiAgICAgICAgc3R1bnVtOiB1bmRlZmluZWQsDQogICAgICAgIHRlcm1pZDogdW5kZWZpbmVkLA0KICAgICAgICBkZXB0aWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgbWFqb3JpZDogdW5kZWZpbmVkLA0KICAgICAgICB0cmFpbmxldmVsaWQ6IHVuZGVmaW5lZCwNCiAgICAgICAgdGFza3R5cGVpZDogdW5kZWZpbmVkDQogICAgICB9LA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgY2xhc3NubzogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfmnJ/nj63lj7fkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfQ0KICAgICAgICBdLA0KICAgICAgICBzdHVudW06IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+35aGr5YaZ5a2m5ZGY5Lq65pWwJywgdHJpZ2dlcjogJ2JsdXInIH0NCiAgICAgICAgXSwNCiAgICAgICAgdGVybWlkOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeW8gOivvuWtpuacnycsIHRyaWdnZXI6ICdjaGFuZ2UnLCB0eXBlOiAnbnVtYmVyJyB9DQogICAgICAgIF0sDQogICAgICAgIGRlcHRpZDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nnrqHnkIbmnLrmnoQnLCB0cmlnZ2VyOiAnY2hhbmdlJywgdHlwZTogJ251bWJlcicgfQ0KICAgICAgICBdLA0KICAgICAgICBtYWpvcmlkOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeWfueiureS4k+S4micsIHRyaWdnZXI6ICdjaGFuZ2UnLCB0eXBlOiAnbnVtYmVyJyB9DQogICAgICAgIF0sDQogICAgICAgIHRyYWlubGV2ZWxpZDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nln7norq3lsYLmrKEnLCB0cmlnZ2VyOiAnY2hhbmdlJywgdHlwZTogJ251bWJlcicgfQ0KICAgICAgICBdLA0KICAgICAgICB0YXNrdHlwZWlkOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeS7u+WKoeexu+WIqycsIHRyaWdnZXI6ICdjaGFuZ2UnLCB0eXBlOiAnbnVtYmVyJyB9DQogICAgICAgIF0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBjbG9zZUZvcm0oKSB7DQogICAgICB0aGlzLmNsYXNzaW5mbyA9IHt9DQogICAgICB0aGlzLnJlc2V0Rm9ybSgnYWRkQ2xhc3NGb3JtUmVmJykNCiAgICAgIHRoaXMub3BlbiA9IGZhbHNlDQogICAgfSwNCiAgICBlZGl0Q2xhc3Mocm93KSB7DQogICAgICB0aGlzLnRpdGxlID0gIue8lui+keacn+ePreS/oeaBryINCiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jbGFzc2luZm8sIHJvdykNCiAgICAgIHRoaXMub3BlbiA9IHRydWUNCiAgICB9LA0KICAgIG9wZW5EaWFsb2coKSB7DQogICAgICB0aGlzLm9wZW4gPSB0cnVlDQogICAgfSwNCiAgICBzdWJtaXRGb3JtKCkgew0KICAgICAgdGhpcy4kcmVmcy5hZGRDbGFzc0Zvcm1SZWYudmFsaWRhdGUodmFsaWQgPT4gew0KICAgICAgICBpZih2YWxpZCkgew0KICAgICAgICAgIHRoaXMuY2xhc3NpbmZvLnN0dW51bSA9IE51bWJlcih0aGlzLmNsYXNzaW5mby5zdHVudW0pDQogICAgICAgICAgdGhpcy5jbGFzc2luZm8udGVybWlkID0gTnVtYmVyKHRoaXMuY2xhc3NpbmZvLnRlcm1pZCkNCiAgICAgICAgICB0aGlzLmNsYXNzaW5mby5kZXB0aWQgPSBOdW1iZXIodGhpcy5jbGFzc2luZm8uZGVwdGlkKQ0KICAgICAgICAgIHRoaXMuY2xhc3NpbmZvLm1ham9yaWQgPSBOdW1iZXIodGhpcy5jbGFzc2luZm8ubWFqb3JpZCkNCiAgICAgICAgICB0aGlzLmNsYXNzaW5mby50cmFpbmxldmVsaWQgPSBOdW1iZXIodGhpcy5jbGFzc2luZm8udHJhaW5sZXZlbGlkKQ0KICAgICAgICAgIHRoaXMuY2xhc3NpbmZvLnRhc2t0eXBlaWQgPSBOdW1iZXIodGhpcy5jbGFzc2luZm8udGFza3R5cGVpZCkNCiAgICAgICAgICBpZih0aGlzLmNsYXNzaW5mby5pZCA+IDApIHsNCiAgICAgICAgICAgIHVwZGF0ZUNsYXNzKHRoaXMuY2xhc3NpbmZvKS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgbGV0IG1zZyA9IHJlcy5tZXNzYWdlDQogICAgICAgICAgICAgIGxldCBjb2RlID0gcmVzLmNvZGUNCiAgICAgICAgICAgICAgaWYoY29kZSA9PSA3KSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbW9kYWwubm90aWZ5RXJyb3IobXNnKQ0KICAgICAgICAgICAgICB9IGVsc2UgaWYoY29kZSA9PSA5KSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcyhtc2cpDQogICAgICAgICAgICAgICAgdGhpcy5jbG9zZUZvcm0oKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBhZGRDbGFzcyh0aGlzLmNsYXNzaW5mbykudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICBsZXQgbXNnID0gcmVzLm1lc3NhZ2UNCiAgICAgICAgICAgICAgbGV0IGNvZGUgPSByZXMuY29kZQ0KICAgICAgICAgICAgICBpZihjb2RlID09IDcpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtb2RhbC5ub3RpZnlFcnJvcihtc2cpDQogICAgICAgICAgICAgIH0gZWxzZSBpZihjb2RlID09IDgpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKG1zZykNCiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRm9ybSgpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfQ0KICAgICAgICAgIA0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["addclass.vue"],"names":[],"mappings":";;AA8FA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"addclass.vue","sourceRoot":"src/views/basicdata/class","sourcesContent":["<template>\r\n  <el-dialog\r\n    :title=\"title\"\r\n    :visible.sync=\"open\"\r\n    @close=\"closeForm\"\r\n    width=\"600px\">\r\n      <el-form label-width=\"100px\" :model=\"classinfo\" ref=\"addClassFormRef\" :rules=\"rules\">\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"期班号\" prop=\"classno\">\r\n              <el-input placeholder=\"请输入期班号\" v-model=\"classinfo.classno\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"开课学期\" prop=\"termid\">\r\n              <el-select v-model=\"classinfo.termid\" placeholder=\"请选择\">\r\n                <el-option\r\n                  v-for=\"item in terms\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"学员人数\" prop=\"stunum\">\r\n              <el-input placeholder=\"请输入学员人数\" v-model=\"classinfo.stunum\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"任务类别\" prop=\"tasktypeid\">\r\n              <el-select v-model=\"classinfo.tasktypeid\" placeholder=\"请选择\">\r\n                <el-option\r\n                  v-for=\"item in tasktypes\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"培训层次\" prop=\"trainlevelid\">\r\n              <el-select v-model=\"classinfo.trainlevelid\" placeholder=\"请选择\">\r\n                <el-option\r\n                  v-for=\"item in trainlevels\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"培训专业\" prop=\"majorid\">\r\n              <el-select v-model=\"classinfo.majorid\" placeholder=\"请选择\">\r\n                <el-option\r\n                  v-for=\"item in majors\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"管理机构\" prop=\"deptid\">\r\n              <tree-select \r\n                :options=\"depts\" \r\n                :show-count=\"true\"\r\n                v-model=\"classinfo.deptid\"\r\n                :value=\"classinfo.deptid\"></tree-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"24\" style=\"text-align: right\">\r\n            <el-button type=\"primary\" @click=\"submitForm\">确定</el-button>\r\n            <el-button @click=\"closeForm\">取消</el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\n\r\nimport TreeSelect from '@riophae/vue-treeselect'\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\r\nimport { addClass, updateClass } from '../../../api/basicdata/class'\r\n\r\nexport default {\r\n  name: 'AddClass',\r\n  components: {\r\n    TreeSelect\r\n  },\r\n  props: {\r\n    classnos: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    terms: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    depts: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    majors: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    trainlevels: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    tasktypes: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      title: '添加期班',\r\n      open: false,\r\n      classinfo: {\r\n        id: undefined,\r\n        classno: undefined,\r\n        stunum: undefined,\r\n        termid: undefined,\r\n        deptid: undefined,\r\n        majorid: undefined,\r\n        trainlevelid: undefined,\r\n        tasktypeid: undefined\r\n      },\r\n      rules: {\r\n        classno: [\r\n          { required: true, message: '期班号不能为空', trigger: 'blur' }\r\n        ],\r\n        stunum: [\r\n          { required: true, message: '请填写学员人数', trigger: 'blur' }\r\n        ],\r\n        termid: [\r\n          { required: true, message: '请选择开课学期', trigger: 'change', type: 'number' }\r\n        ],\r\n        deptid: [\r\n          { required: true, message: '请选择管理机构', trigger: 'change', type: 'number' }\r\n        ],\r\n        majorid: [\r\n          { required: true, message: '请选择培训专业', trigger: 'change', type: 'number' }\r\n        ],\r\n        trainlevelid: [\r\n          { required: true, message: '请选择培训层次', trigger: 'change', type: 'number' }\r\n        ],\r\n        tasktypeid: [\r\n          { required: true, message: '请选择任务类别', trigger: 'change', type: 'number' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    closeForm() {\r\n      this.classinfo = {}\r\n      this.resetForm('addClassFormRef')\r\n      this.open = false\r\n    },\r\n    editClass(row) {\r\n      this.title = \"编辑期班信息\"\r\n      Object.assign(this.classinfo, row)\r\n      this.open = true\r\n    },\r\n    openDialog() {\r\n      this.open = true\r\n    },\r\n    submitForm() {\r\n      this.$refs.addClassFormRef.validate(valid => {\r\n        if(valid) {\r\n          this.classinfo.stunum = Number(this.classinfo.stunum)\r\n          this.classinfo.termid = Number(this.classinfo.termid)\r\n          this.classinfo.deptid = Number(this.classinfo.deptid)\r\n          this.classinfo.majorid = Number(this.classinfo.majorid)\r\n          this.classinfo.trainlevelid = Number(this.classinfo.trainlevelid)\r\n          this.classinfo.tasktypeid = Number(this.classinfo.tasktypeid)\r\n          if(this.classinfo.id > 0) {\r\n            updateClass(this.classinfo).then(() => {\r\n              let msg = res.message\r\n              let code = res.code\r\n              if(code == 7) {\r\n                this.$modal.notifyError(msg)\r\n              } else if(code == 9) {\r\n                this.$modal.msgSuccess(msg)\r\n                this.closeForm()\r\n              }\r\n            })\r\n          } else {\r\n            addClass(this.classinfo).then(res => {\r\n              let msg = res.message\r\n              let code = res.code\r\n              if(code == 7) {\r\n                this.$modal.notifyError(msg)\r\n              } else if(code == 8) {\r\n                this.$modal.msgSuccess(msg)\r\n                this.closeForm()\r\n              }\r\n            })\r\n          }\r\n          \r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\r\n</style>"]}]}