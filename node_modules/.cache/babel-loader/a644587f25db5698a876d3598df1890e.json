{"remainingRequest":"D:\\vue_workspace\\filemanage\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\filemanage\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\vue_workspace\\filemanage\\src\\store\\modules\\user.js","mtime":1678975359062},{"path":"D:\\vue_workspace\\filemanage\\babel.config.js","mtime":1666484881107},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbG9naW4gfSBmcm9tICcuLi8uLi9hcGkvbG9naW4nOwppbXBvcnQgeyBzZXRVaWQsIHNldFVOYW1lLCBzZXRBdmF0YXIsIGdldFVpZCwgZ2V0VU5hbWUsIGdldEF2YXRhciwgcmVtb3ZlVWlkLCByZW1vdmVVTmFtZSwgcmVtb3ZlQXZhdGFyIH0gZnJvbSAnLi4vLi4vdXRpbHMvYXV0aCc7CmNvbnN0IHVzZXIgPSB7CiAgc3RhdGU6IHsKICAgIHVpZDogZ2V0VWlkKCksCiAgICB1bmFtZTogZ2V0VU5hbWUoKSwKICAgIGxvYWRNZW51czogZmFsc2UsCiAgICBhdmF0YXI6IGdldEF2YXRhcigpCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9MT0FEX01FTlVTOiAoc3RhdGUsIGxvYWRNZW51cykgPT4gewogICAgICBzdGF0ZS5sb2FkTWVudXMgPSBsb2FkTWVudXM7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBMb2dpbih7CiAgICAgIGNvbW1pdAogICAgfSwgdXNlckluZm8pIHsKICAgICAgY29uc3QgdXNlcm5hbWUgPSB1c2VySW5mby51c2VybmFtZTsKICAgICAgY29uc3QgcGFzc3dvcmQgPSB1c2VySW5mby5wYXNzd29yZDsKICAgICAgY29uc3QgY2hlY2tjb2RlID0gdXNlckluZm8uY2hlY2tjb2RlOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCwgY2hlY2tjb2RlKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgIGxldCB1aWQgPSByZXMuaWQ7CiAgICAgICAgICAgIGxldCB1bmFtZSA9IHJlcy5uYW1lOwogICAgICAgICAgICBsZXQgYXZhdGFyID0gcmVzLmF2YXRhciA9PT0gbnVsbCB8fCByZXMuYXZhdGFyID09PSAnJyA/IHJlcXVpcmUoJy4uLy4uL2Fzc2V0cy9pbWFnZXMvYXZhdGFyLnBuZycpIDogcmVzLmF2YXRhcjsKICAgICAgICAgICAgc2V0VWlkKHVpZCk7CiAgICAgICAgICAgIHNldFVOYW1lKHVuYW1lKTsKICAgICAgICAgICAgc2V0QXZhdGFyKGF2YXRhcik7CiAgICAgICAgICAgIGNvbW1pdCgnU0VUX0xPQURfTUVOVVMnLCB0cnVlKTsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVqZWN0KCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIExvZ291dCh7CiAgICAgIGNvbW1pdCwKICAgICAgc3RhdGUKICAgIH0pIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICByZW1vdmVVaWQoKTsKICAgICAgICByZW1vdmVVTmFtZSgpOwogICAgICAgIHJlbW92ZUF2YXRhcigpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlTG9hZE1lbnVzKHsKICAgICAgY29tbWl0CiAgICB9KSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgY29tbWl0KCdTRVRfTE9BRF9NRU5VUycsIGZhbHNlKTsKICAgICAgfSk7CiAgICB9CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB1c2VyOw=="},{"version":3,"names":["login","setUid","setUName","setAvatar","getUid","getUName","getAvatar","removeUid","removeUName","removeAvatar","user","state","uid","uname","loadMenus","avatar","mutations","SET_LOAD_MENUS","actions","Login","commit","userInfo","username","password","checkcode","Promise","resolve","reject","then","res","id","name","require","Logout","updateLoadMenus"],"sources":["D:/vue_workspace/filemanage/src/store/modules/user.js"],"sourcesContent":["import { login } from '../../api/login'\r\n\r\nimport { setUid, setUName, setAvatar, getUid, getUName, getAvatar, removeUid, removeUName, removeAvatar } from '../../utils/auth'\r\n\r\nconst user  = {\r\n  state: {\r\n    uid: getUid(),\r\n    uname: getUName(),\r\n    loadMenus: false,\r\n    avatar: getAvatar()\r\n  },\r\n  mutations: {\r\n    SET_LOAD_MENUS: (state, loadMenus) => {\r\n      state.loadMenus = loadMenus\r\n    }\r\n  },\r\n  actions: {\r\n    Login({commit}, userInfo) {\r\n      const username = userInfo.username\r\n      const password = userInfo.password\r\n      const checkcode = userInfo.checkcode\r\n      return new Promise((resolve, reject) => {\r\n        login(username, password, checkcode).then(res => {\r\n          if(res) {\r\n            let uid = res.id\r\n            let uname = res.name\r\n            let avatar = (res.avatar === null || res.avatar === '') \r\n              ? require('../../assets/images/avatar.png') : res.avatar\r\n            setUid(uid)\r\n            setUName(uname)\r\n            setAvatar(avatar)\r\n            commit('SET_LOAD_MENUS', true)\r\n            resolve()\r\n          } else {\r\n            reject()\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    Logout({ commit, state }) {\r\n      return new Promise((resolve, reject) => {\r\n        removeUid()\r\n        removeUName()\r\n        removeAvatar()\r\n        resolve()\r\n      })\r\n    },\r\n\r\n    updateLoadMenus({ commit }) {\r\n      return new Promise((resolve, reject) => {\r\n        commit('SET_LOAD_MENUS', false)\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport default user"],"mappings":"AAAA,SAASA,KAAK,QAAQ,iBAAiB;AAEvC,SAASC,MAAM,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,SAAS,EAAEC,WAAW,EAAEC,YAAY,QAAQ,kBAAkB;AAEjI,MAAMC,IAAI,GAAI;EACZC,KAAK,EAAE;IACLC,GAAG,EAAER,MAAM,EAAE;IACbS,KAAK,EAAER,QAAQ,EAAE;IACjBS,SAAS,EAAE,KAAK;IAChBC,MAAM,EAAET,SAAS;EACnB,CAAC;EACDU,SAAS,EAAE;IACTC,cAAc,EAAE,CAACN,KAAK,EAAEG,SAAS,KAAK;MACpCH,KAAK,CAACG,SAAS,GAAGA,SAAS;IAC7B;EACF,CAAC;EACDI,OAAO,EAAE;IACPC,KAAK,CAAC;MAACC;IAAM,CAAC,EAAEC,QAAQ,EAAE;MACxB,MAAMC,QAAQ,GAAGD,QAAQ,CAACC,QAAQ;MAClC,MAAMC,QAAQ,GAAGF,QAAQ,CAACE,QAAQ;MAClC,MAAMC,SAAS,GAAGH,QAAQ,CAACG,SAAS;MACpC,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtC3B,KAAK,CAACsB,QAAQ,EAAEC,QAAQ,EAAEC,SAAS,CAAC,CAACI,IAAI,CAACC,GAAG,IAAI;UAC/C,IAAGA,GAAG,EAAE;YACN,IAAIjB,GAAG,GAAGiB,GAAG,CAACC,EAAE;YAChB,IAAIjB,KAAK,GAAGgB,GAAG,CAACE,IAAI;YACpB,IAAIhB,MAAM,GAAIc,GAAG,CAACd,MAAM,KAAK,IAAI,IAAIc,GAAG,CAACd,MAAM,KAAK,EAAE,GAClDiB,OAAO,CAAC,gCAAgC,CAAC,GAAGH,GAAG,CAACd,MAAM;YAC1Dd,MAAM,CAACW,GAAG,CAAC;YACXV,QAAQ,CAACW,KAAK,CAAC;YACfV,SAAS,CAACY,MAAM,CAAC;YACjBK,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC;YAC9BM,OAAO,EAAE;UACX,CAAC,MAAM;YACLC,MAAM,EAAE;UACV;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IAEDM,MAAM,CAAC;MAAEb,MAAM;MAAET;IAAM,CAAC,EAAE;MACxB,OAAO,IAAIc,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtCpB,SAAS,EAAE;QACXC,WAAW,EAAE;QACbC,YAAY,EAAE;QACdiB,OAAO,EAAE;MACX,CAAC,CAAC;IACJ,CAAC;IAEDQ,eAAe,CAAC;MAAEd;IAAO,CAAC,EAAE;MAC1B,OAAO,IAAIK,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtCP,MAAM,CAAC,gBAAgB,EAAE,KAAK,CAAC;MACjC,CAAC,CAAC;IACJ;EACF;AACF,CAAC;AAED,eAAeV,IAAI"}]}