{"remainingRequest":"D:\\vue_workspace\\filemanage\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\filemanage\\src\\store\\modules\\permission.js","dependencies":[{"path":"D:\\vue_workspace\\filemanage\\src\\store\\modules\\permission.js","mtime":1672135038020},{"path":"D:\\vue_workspace\\filemanage\\babel.config.js","mtime":1666484881107},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZ2V0Um91dGVycyB9IGZyb20gJy4uLy4uL2FwaS9tZW51JzsKaW1wb3J0IHsgY29uc3RhbnRSb3V0ZXJzIH0gZnJvbSAiLi4vLi4vcm91dGVyL2luZGV4IjsKaW1wb3J0IExheW91dCBmcm9tICJAL2xheW91dC9pbmRleCI7CmNvbnN0IHBlcm1pc3Npb24gPSB7CiAgc3RhdGU6IHsKICAgIHNpZGViYXJSb3V0ZXJzOiBbXSwKICAgIHBlcm1pc3Npb25zOiBbXQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfU0lERVJCQVJfUk9VVEVSUzogKHN0YXRlLCByb3V0ZXJzKSA9PiB7CiAgICAgIHN0YXRlLnNpZGViYXJSb3V0ZXJzID0gcm91dGVyczsKICAgIH0sCiAgICBTRVRfUEVSTUlTU0lPTlM6IChzdGF0ZSwgcGVybWlzc2lvbnMpID0+IHsKICAgICAgc3RhdGUucGVybWlzc2lvbnMgPSBwZXJtaXNzaW9uczsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIEdlbmVyYXRlUm91dGVzKHsKICAgICAgY29tbWl0CiAgICB9LCB1aWQpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgIGdldFJvdXRlcnModWlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBsZXQgbWVudXMgPSByZXMubWVudXM7CiAgICAgICAgICBjb25zdCByZGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobWVudXMpKTsKICAgICAgICAgIGNvbnN0IHNkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShtZW51cykpOwogICAgICAgICAgY29uc3Qgc2lkZWJhcmRhdGEgPSBmaWx0ZXJBc3luY1JvdXRlcihyZGF0YSk7CiAgICAgICAgICBjb25zdCByZXdyaXRlZGF0YSA9IGZpbHRlckFzeW5jUm91dGVyKHNkYXRhKTsKICAgICAgICAgIGNvbW1pdCgnU0VUX1NJREVSQkFSX1JPVVRFUlMnLCBjb25zdGFudFJvdXRlcnMuY29uY2F0KHNpZGViYXJkYXRhKSk7CiAgICAgICAgICByZXNvbHZlKHJld3JpdGVkYXRhKTsKICAgICAgICAgIGxldCBwZXJtcyA9IHJlcy5wZXJtczsKICAgICAgICAgIGNvbW1pdCgnU0VUX1BFUk1JU1NJT05TJywgcGVybXMpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07CmZ1bmN0aW9uIGZpbHRlckFzeW5jUm91dGVyKGFzeW5jUm91dGVyTWFwKSB7CiAgcmV0dXJuIGFzeW5jUm91dGVyTWFwLmZpbHRlcihyb3V0ZSA9PiB7CiAgICBpZiAocm91dGUuY29tcG9uZW50KSB7CiAgICAgIGlmIChyb3V0ZS5jb21wb25lbnQgPT09ICdMYXlvdXQnKSB7CiAgICAgICAgcm91dGUuY29tcG9uZW50ID0gTGF5b3V0OwogICAgICB9IGVsc2UgewogICAgICAgIHJvdXRlLmNvbXBvbmVudCA9IGxvYWRWaWV3KHJvdXRlLmNvbXBvbmVudCk7CiAgICAgIH0KICAgIH0KICAgIGlmIChyb3V0ZS5jaGlsZHJlbiAmJiByb3V0ZS5jaGlsZHJlbiAhPT0gbnVsbCAmJiByb3V0ZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgIHJvdXRlLmNoaWxkcmVuID0gZmlsdGVyQXN5bmNSb3V0ZXIocm91dGUuY2hpbGRyZW4pOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfSk7Cn0KZnVuY3Rpb24gbG9hZFZpZXcodmlldykgewogIHJldHVybiByZXNvbHZlID0+IHJlcXVpcmUoW2BAL3ZpZXdzLyR7dmlld31gXSwgcmVzb2x2ZSk7Cn0KZXhwb3J0IGRlZmF1bHQgcGVybWlzc2lvbjs="},{"version":3,"names":["getRouters","constantRouters","Layout","permission","state","sidebarRouters","permissions","mutations","SET_SIDERBAR_ROUTERS","routers","SET_PERMISSIONS","actions","GenerateRoutes","commit","uid","Promise","resolve","then","res","menus","rdata","JSON","parse","stringify","sdata","sidebardata","filterAsyncRouter","rewritedata","concat","perms","asyncRouterMap","filter","route","component","loadView","children","length","view","require"],"sources":["D:/vue_workspace/filemanage/src/store/modules/permission.js"],"sourcesContent":["\r\nimport {getRouters} from '../../api/menu'\r\nimport { constantRouters } from \"../../router/index\"\r\nimport Layout from \"@/layout/index\"\r\n\r\nconst permission = {\r\n  state: {\r\n    sidebarRouters: [],\r\n    permissions: []\r\n  },\r\n  mutations: {\r\n    SET_SIDERBAR_ROUTERS: (state, routers) => {\r\n      state.sidebarRouters = routers\r\n    },\r\n    SET_PERMISSIONS: (state, permissions) => {\r\n      state.permissions = permissions\r\n    }\r\n  },\r\n  actions: {\r\n    GenerateRoutes({commit}, uid) {\r\n      return new Promise(resolve => {\r\n        getRouters(uid).then(res => {\r\n          let menus = res.menus\r\n          const rdata = JSON.parse(JSON.stringify(menus))\r\n          const sdata = JSON.parse(JSON.stringify(menus))\r\n          const sidebardata = filterAsyncRouter(rdata)\r\n          const rewritedata = filterAsyncRouter(sdata)\r\n          commit('SET_SIDERBAR_ROUTERS', constantRouters.concat(sidebardata))\r\n          resolve(rewritedata)\r\n\r\n          let perms = res.perms\r\n          commit('SET_PERMISSIONS', perms)\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nfunction filterAsyncRouter(asyncRouterMap) {\r\n  return asyncRouterMap.filter(route => {\r\n    if(route.component) {\r\n      if(route.component === 'Layout') {\r\n        route.component = Layout\r\n      } else {\r\n        route.component = loadView(route.component)\r\n      }\r\n    }\r\n    \r\n    if(route.children && route.children !== null && route.children.length > 0) {\r\n      route.children = filterAsyncRouter(route.children)\r\n    }\r\n    return true\r\n  })\r\n}\r\n\r\nfunction loadView(view) {\r\n  return (resolve) => require([`@/views/${view}`], resolve)\r\n}\r\n\r\nexport default permission"],"mappings":"AACA,SAAQA,UAAU,QAAO,gBAAgB;AACzC,SAASC,eAAe,QAAQ,oBAAoB;AACpD,OAAOC,MAAM,MAAM,gBAAgB;AAEnC,MAAMC,UAAU,GAAG;EACjBC,KAAK,EAAE;IACLC,cAAc,EAAE,EAAE;IAClBC,WAAW,EAAE;EACf,CAAC;EACDC,SAAS,EAAE;IACTC,oBAAoB,EAAE,CAACJ,KAAK,EAAEK,OAAO,KAAK;MACxCL,KAAK,CAACC,cAAc,GAAGI,OAAO;IAChC,CAAC;IACDC,eAAe,EAAE,CAACN,KAAK,EAAEE,WAAW,KAAK;MACvCF,KAAK,CAACE,WAAW,GAAGA,WAAW;IACjC;EACF,CAAC;EACDK,OAAO,EAAE;IACPC,cAAc,CAAC;MAACC;IAAM,CAAC,EAAEC,GAAG,EAAE;MAC5B,OAAO,IAAIC,OAAO,CAACC,OAAO,IAAI;QAC5BhB,UAAU,CAACc,GAAG,CAAC,CAACG,IAAI,CAACC,GAAG,IAAI;UAC1B,IAAIC,KAAK,GAAGD,GAAG,CAACC,KAAK;UACrB,MAAMC,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACJ,KAAK,CAAC,CAAC;UAC/C,MAAMK,KAAK,GAAGH,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACJ,KAAK,CAAC,CAAC;UAC/C,MAAMM,WAAW,GAAGC,iBAAiB,CAACN,KAAK,CAAC;UAC5C,MAAMO,WAAW,GAAGD,iBAAiB,CAACF,KAAK,CAAC;UAC5CX,MAAM,CAAC,sBAAsB,EAAEZ,eAAe,CAAC2B,MAAM,CAACH,WAAW,CAAC,CAAC;UACnET,OAAO,CAACW,WAAW,CAAC;UAEpB,IAAIE,KAAK,GAAGX,GAAG,CAACW,KAAK;UACrBhB,MAAM,CAAC,iBAAiB,EAAEgB,KAAK,CAAC;QAClC,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ;EACF;AACF,CAAC;AAED,SAASH,iBAAiB,CAACI,cAAc,EAAE;EACzC,OAAOA,cAAc,CAACC,MAAM,CAACC,KAAK,IAAI;IACpC,IAAGA,KAAK,CAACC,SAAS,EAAE;MAClB,IAAGD,KAAK,CAACC,SAAS,KAAK,QAAQ,EAAE;QAC/BD,KAAK,CAACC,SAAS,GAAG/B,MAAM;MAC1B,CAAC,MAAM;QACL8B,KAAK,CAACC,SAAS,GAAGC,QAAQ,CAACF,KAAK,CAACC,SAAS,CAAC;MAC7C;IACF;IAEA,IAAGD,KAAK,CAACG,QAAQ,IAAIH,KAAK,CAACG,QAAQ,KAAK,IAAI,IAAIH,KAAK,CAACG,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE;MACzEJ,KAAK,CAACG,QAAQ,GAAGT,iBAAiB,CAACM,KAAK,CAACG,QAAQ,CAAC;IACpD;IACA,OAAO,IAAI;EACb,CAAC,CAAC;AACJ;AAEA,SAASD,QAAQ,CAACG,IAAI,EAAE;EACtB,OAAQrB,OAAO,IAAKsB,OAAO,CAAC,CAAE,WAAUD,IAAK,EAAC,CAAC,EAAErB,OAAO,CAAC;AAC3D;AAEA,eAAeb,UAAU"}]}