{"remainingRequest":"D:\\vue_workspace\\filemanage\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\filemanage\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\vue_workspace\\filemanage\\src\\store\\modules\\user.js","mtime":1669471534865},{"path":"D:\\vue_workspace\\filemanage\\babel.config.js","mtime":1666484881107},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\filemanage\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbG9naW4gfSBmcm9tICcuLi8uLi9hcGkvbG9naW4nOwppbXBvcnQgeyBzZXRVaWQsIHNldFVOYW1lLCBnZXRVaWQsIGdldFVOYW1lLCByZW1vdmVVaWQsIHJlbW92ZVVOYW1lIH0gZnJvbSAnLi4vLi4vdXRpbHMvYXV0aCc7CmNvbnN0IHVzZXIgPSB7CiAgc3RhdGU6IHsKICAgIHVpZDogZ2V0VWlkKCksCiAgICB1bmFtZTogZ2V0VU5hbWUoKSwKICAgIGxvYWRNZW51czogZmFsc2UsCiAgICBhdmF0YXI6ICcnCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9VSUQ6IChzdGF0ZSwgdWlkKSA9PiB7CiAgICAgIHN0YXRlLnVpZCA9IHVpZDsKICAgIH0sCiAgICBTRVRfVU5BTUU6IChzdGF0ZSwgdW5hbWUpID0+IHsKICAgICAgc3RhdGUudW5hbWUgPSB1bmFtZTsKICAgIH0sCiAgICBTRVRfTE9BRF9NRU5VUzogKHN0YXRlLCBsb2FkTWVudXMpID0+IHsKICAgICAgc3RhdGUubG9hZE1lbnVzID0gbG9hZE1lbnVzOwogICAgfSwKICAgIFNFVF9BVkFUQVI6IChzdGF0ZSwgYXZhdGFyKSA9PiB7CiAgICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIExvZ2luKHsKICAgICAgY29tbWl0CiAgICB9LCB1c2VySW5mbykgewogICAgICBjb25zdCB1c2VybmFtZSA9IHVzZXJJbmZvLnVzZXJuYW1lOwogICAgICBjb25zdCBwYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICBsZXQgdWlkID0gcmVzLmlkOwogICAgICAgICAgICBsZXQgdW5hbWUgPSByZXMubmFtZTsKICAgICAgICAgICAgbGV0IGF2YXRhciA9IHJlcy5hdmF0YXIgPT09IG51bGwgfHwgcmVzLmF2YXRhciA9PT0gJycgPyByZXF1aXJlKCcuLi8uLi9hc3NldHMvaW1hZ2VzL2F2YXRhci5wbmcnKSA6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9VUkwgKyByZXMuYXZhdGFyOwogICAgICAgICAgICBzZXRVaWQodWlkKTsKICAgICAgICAgICAgc2V0VU5hbWUodW5hbWUpOwogICAgICAgICAgICBjb21taXQoJ1NFVF9VSUQnLCB1aWQpOwogICAgICAgICAgICBjb21taXQoJ1NFVF9VTkFNRScsIHVuYW1lKTsKICAgICAgICAgICAgY29tbWl0KCdTRVRfTE9BRF9NRU5VUycsIHRydWUpOwogICAgICAgICAgICBjb21taXQoJ2F2YXRhcicsIGF2YXRhcik7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBMb2dvdXQoewogICAgICBjb21taXQsCiAgICAgIHN0YXRlCiAgICB9KSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgcmVtb3ZlVWlkKCk7CiAgICAgICAgcmVtb3ZlVU5hbWU7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVMb2FkTWVudXMoewogICAgICBjb21taXQKICAgIH0pIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBjb21taXQoJ1NFVF9MT0FEX01FTlVTJywgZmFsc2UpOwogICAgICB9KTsKICAgIH0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IHVzZXI7"},{"version":3,"names":["login","setUid","setUName","getUid","getUName","removeUid","removeUName","user","state","uid","uname","loadMenus","avatar","mutations","SET_UID","SET_UNAME","SET_LOAD_MENUS","SET_AVATAR","actions","Login","commit","userInfo","username","password","Promise","resolve","reject","then","res","id","name","require","process","env","VUE_APP_BASE_URL","Logout","updateLoadMenus"],"sources":["D:/vue_workspace/filemanage/src/store/modules/user.js"],"sourcesContent":["import { login } from '../../api/login'\r\n\r\nimport { setUid, setUName, getUid, getUName, removeUid, removeUName } from '../../utils/auth'\r\n\r\nconst user  = {\r\n  state: {\r\n    uid: getUid(),\r\n    uname: getUName(),\r\n    loadMenus: false,\r\n    avatar: ''\r\n  },\r\n  mutations: {\r\n    SET_UID: (state, uid) => {\r\n      state.uid = uid\r\n    },\r\n    SET_UNAME: (state, uname) => {\r\n      state.uname = uname\r\n    },\r\n    SET_LOAD_MENUS: (state, loadMenus) => {\r\n      state.loadMenus = loadMenus\r\n    },\r\n    SET_AVATAR: (state, avatar) => {\r\n      state.avatar = avatar\r\n    }\r\n  },\r\n  actions: {\r\n    Login({commit}, userInfo) {\r\n      const username = userInfo.username\r\n      const password = userInfo.password\r\n      return new Promise((resolve, reject) => {\r\n        login(username, password).then(res => {\r\n          if(res) {\r\n            let uid = res.id\r\n            let uname = res.name\r\n            let avatar = (res.avatar === null || res.avatar === '') \r\n              ? require('../../assets/images/avatar.png') : process.env.VUE_APP_BASE_URL + res.avatar\r\n            setUid(uid)\r\n            setUName(uname)\r\n            commit('SET_UID', uid)\r\n            commit('SET_UNAME', uname)\r\n            commit('SET_LOAD_MENUS', true)\r\n            commit('avatar', avatar)\r\n            resolve()\r\n          } else {\r\n            reject()\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    Logout({ commit, state }) {\r\n      return new Promise((resolve, reject) => {\r\n        removeUid()\r\n        removeUName\r\n        resolve()\r\n      })\r\n    },\r\n\r\n    updateLoadMenus({ commit }) {\r\n      return new Promise((resolve, reject) => {\r\n        commit('SET_LOAD_MENUS', false)\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport default user"],"mappings":"AAAA,SAASA,KAAK,QAAQ,iBAAiB;AAEvC,SAASC,MAAM,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AAE7F,MAAMC,IAAI,GAAI;EACZC,KAAK,EAAE;IACLC,GAAG,EAAEN,MAAM,EAAE;IACbO,KAAK,EAAEN,QAAQ,EAAE;IACjBO,SAAS,EAAE,KAAK;IAChBC,MAAM,EAAE;EACV,CAAC;EACDC,SAAS,EAAE;IACTC,OAAO,EAAE,CAACN,KAAK,EAAEC,GAAG,KAAK;MACvBD,KAAK,CAACC,GAAG,GAAGA,GAAG;IACjB,CAAC;IACDM,SAAS,EAAE,CAACP,KAAK,EAAEE,KAAK,KAAK;MAC3BF,KAAK,CAACE,KAAK,GAAGA,KAAK;IACrB,CAAC;IACDM,cAAc,EAAE,CAACR,KAAK,EAAEG,SAAS,KAAK;MACpCH,KAAK,CAACG,SAAS,GAAGA,SAAS;IAC7B,CAAC;IACDM,UAAU,EAAE,CAACT,KAAK,EAAEI,MAAM,KAAK;MAC7BJ,KAAK,CAACI,MAAM,GAAGA,MAAM;IACvB;EACF,CAAC;EACDM,OAAO,EAAE;IACPC,KAAK,CAAC;MAACC;IAAM,CAAC,EAAEC,QAAQ,EAAE;MACxB,MAAMC,QAAQ,GAAGD,QAAQ,CAACC,QAAQ;MAClC,MAAMC,QAAQ,GAAGF,QAAQ,CAACE,QAAQ;MAClC,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtC1B,KAAK,CAACsB,QAAQ,EAAEC,QAAQ,CAAC,CAACI,IAAI,CAACC,GAAG,IAAI;UACpC,IAAGA,GAAG,EAAE;YACN,IAAInB,GAAG,GAAGmB,GAAG,CAACC,EAAE;YAChB,IAAInB,KAAK,GAAGkB,GAAG,CAACE,IAAI;YACpB,IAAIlB,MAAM,GAAIgB,GAAG,CAAChB,MAAM,KAAK,IAAI,IAAIgB,GAAG,CAAChB,MAAM,KAAK,EAAE,GAClDmB,OAAO,CAAC,gCAAgC,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,gBAAgB,GAAGN,GAAG,CAAChB,MAAM;YACzFX,MAAM,CAACQ,GAAG,CAAC;YACXP,QAAQ,CAACQ,KAAK,CAAC;YACfU,MAAM,CAAC,SAAS,EAAEX,GAAG,CAAC;YACtBW,MAAM,CAAC,WAAW,EAAEV,KAAK,CAAC;YAC1BU,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC;YAC9BA,MAAM,CAAC,QAAQ,EAAER,MAAM,CAAC;YACxBa,OAAO,EAAE;UACX,CAAC,MAAM;YACLC,MAAM,EAAE;UACV;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IAEDS,MAAM,CAAC;MAAEf,MAAM;MAAEZ;IAAM,CAAC,EAAE;MACxB,OAAO,IAAIgB,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtCrB,SAAS,EAAE;QACXC,WAAW;QACXmB,OAAO,EAAE;MACX,CAAC,CAAC;IACJ,CAAC;IAEDW,eAAe,CAAC;MAAEhB;IAAO,CAAC,EAAE;MAC1B,OAAO,IAAII,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtCN,MAAM,CAAC,gBAAgB,EAAE,KAAK,CAAC;MACjC,CAAC,CAAC;IACJ;EACF;AACF,CAAC;AAED,eAAeb,IAAI"}]}